{"version":3,"sources":["components/GlobalStyle.js","i18n/index.js","utils/index.js","subtitle/sub.js","subtitle/index.js","components/Upload.js","components/SyntheticVideo.js","components/Dialog.js","components/Help.js","components/Header.js","components/Player.js","translate/languages.js","components/Tool.js","components/Template.js","components/Subtitle.js","components/Main.js","waveform/emitter.js","waveform/events.js","waveform/utils.js","waveform/template.js","waveform/drawer.js","waveform/decoder.js","waveform/loader.js","waveform/controller.js","waveform/index.js","components/Block.js","components/Metronome.js","components/Footer.js","utils/storage.js","translate/index.js","components/App.js","serviceWorker.js","index.js"],"names":["createGlobalStyle","zh","open","save","undo","clear","help","donate","confirm","delete","insert","merge","waveform","size","decode","channel","duration","zoom","metronome","export","en","names","getExt","url","includes","split","trim","toLowerCase","pop","sleep","ms","Promise","resolve","setTimeout","secondToTime","seconds","DT","d2t","toFixed","timeToSecond","time","t2d","notify","text","type","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","getKeyCode","event","tag","document","activeElement","tagName","toUpperCase","editable","getAttribute","Number","keyCode","toHex","number","res","toString","length","syntheticVideo","options","storage","a","uploadVideoFile","videoUrl","videoBlobId","fontColor","get","requestId","uuidv4","params","videoWidth","videoHeight","templateId","b","g","r","fontId","md5","map","item","start","end","fetch","method","headers","mode","body","JSON","stringify","rawResponse","json","content","replace","c","Math","random","uploadFile","blob","formdata","FormData","then","blobFile","lastModifiedDate","Date","name","getTime","append","catch","error","console","log","resJson","blobstoreId","Sub","this","startTime","endTime","clamp","Infinity","checkIsFile","source","File","getType","getVtt","getVttFromFile","getVttFromUrl","vttToUrl","vtt","URL","createObjectURL","Blob","file","reader","FileReader","onload","result","assToVtt","srtToVtt","readAsText","response","ass","re_ass","RegExp","fixTime","index","arr","join","line","m","match","filter","srt","concat","getSubFromVttUrl","$video","createElement","$track","default","kind","appendChild","Array","from","track","cues","src","Upload","styled","div","player","setOption","updateSubtitles","openSubtitle","NProgress","set","vttText","subtitleUrl","subtitle","switch","uploadDialog","t","message","done","openVideo","canPlayType","className","value","disabled","spellCheck","onChange","target","files","SyntheticVideo","useState","setVideoUrl","synthesis","setSynthesis","synthesising","useEffect","onClick","style","height","width","option","loop","autoSize","aspectRatio","playbackRate","fullscreen","fullscreenWeb","miniProgressBar","moreVideoAttr","crossOrigin","preload","defaultValue","disable","addonAfter","DownloadOutlined","download","Dialog","props","activeName","setActiveName","stopPropagation","title","onClose","children","Help","textAlign","marginLeft","color","marginTop","Header","Left","Right","Logo","Menu","I18n","href","elink","display","click","removeChild","downloadFile","subtitles","now","syntheticVideoDialog","undoSubtitles","window","cleanSubtitles","helpDialog","UsergroupAddOutlined","fontSize","key","language","updateLang","Object","keys","Player","React","memo","setPlayer","setCurrentTime","getInstance","art","requestAnimationFrame","playing","currentTime","on","template","configure","showSpinner","Tool","translateSubtitles","timeOffsetSubtitles","bottom","isRecognition","setRecognition","auditToText","fileKey","data","$subtitle","audioblob","loading","controls","translationLanguage","languages","SketchExample","state","displayColorPicker","handleClick","setState","handleClose","handleChange","rgb","styles","reactCSS","borderRadius","background","border","swatch","boxShadow","cursor","popover","zIndex","cover","top","right","left","Component","Template","setFontSize","setBottom","templateList","setTemplateList","fontList","setFontList","list","min","max","step","Group","e","id","Button","padding","margin","marginBottom","coverUrl","Subtitle","addSubtitle","currentIndex","updateSubtitle","removeSubtitle","checkSubtitle","translateSubtitle","isDroging","lastPageX","lastSub","lastKey","lastValue","onMouseDown","sub","pageX","onMouseMove","onMouseUp","setWidth","setHeight","resize","useCallback","clientWidth","clientHeight","init","debounceResize","debounce","addEventListener","headerHeight","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","rowRenderer","rowData","pause","seek","flex","maxLength","unescape","TabPane","Tabs","Main","defaultActiveKey","tab","Emitter","fn","ctx","push","self","listener","off","args","apply","_","evtArr","slice","i","callback","evts","liveEvents","len","Events","destroyEvents","proxy","bind","isArray","forEach","removeEventListener","WFPlayerError","Error","errorHandle","condition","msg","durationToTime","num","wf","canvas","update","container","pixelRatio","constructor","instances","every","innerHTML","toDataURL","Drawer","getContext","gridNum","gridGap","beginTime","grid","ruler","wave","floor","emit","drawBackground","drawGrid","drawRuler","drawWave","drawCursor","backgroundColor","paddingColor","clearRect","fillStyle","fillRect","progress","waveColor","progressColor","waveScale","decoder","channelData","sampleRate","audiobuffer","middle","waveWidth","startIndex","endIndex","cursorX","stepIndex","xIndex","waveX","gridColor","rulerColor","rulerAtTop","font","second","fillText","fontHeight","cursorColor","Decoder","audioCtx","AudioContext","webkitAudioContext","throttleDecodeAudioData","throttle","decodeAudioData","createBuffer","Float32Array","uint8","buffer","getChannelData","audiowav","toWav","warn","Loader","fileSize","loadSize","Uint8Array","abortController","destroy","AbortController","withCredentials","cors","credentials","signal","getReader","read","byteLength","buffers","Cons","reduce","pre","val","mergeBuffer","call","arrayBuffer","cancel","abort","Controller","playTimer","clickInit","resizeInit","playInit","offsetLeft","events","mediaElement","getTimeFromEvent","drawer","throttleResize","isDestroy","cancelAnimationFrame","WFPlayer","_currentTime","setOptions","controller","loader","devicePixelRatio","checkNum","isInteger","validator","kindOf","querySelector","scheme","HTMLVideoElement","HTMLAudioElement","load","changeChannel","exportImage","splice","indexOf","paused","ended","readyState","Block","magnetically","closeTime","lastTarget","lastType","lastX","lastIndex","lastWidth","lastDiffX","subs","render","autoAlign","loopPlayback","hasSubtitle","mergeSubtitle","contextMenu","setContextMenu","contextMenuX","setContextMenuX","contextMenuY","setContextMenuY","$blockRef","createRef","$contextMenuRef","$subsRef","currentSubs","findIndex","onDocumentClick","composedPath","current","parseFloat","onDocumentMouseMove","transform","onDocumentMouseUp","timeDiff","previou","next","onKeyDown","ref","onContextMenu","preventDefault","subsTop","getBoundingClientRect","$contextMenu","pageY","onDoubleClick","$subs","currentTarget","visibility","prevProps","nextProps","isEqual","Metronome","setMetronome","metronomeStartTime","setMetronomeStartTime","drogStartTime","setDrogStartTime","drogEndTime","setDrogEndTime","$metronomeRef","getEventTime","clickTime","Footer","Waveform","setDecodeing","setFileSize","setChannelNum","setRender","$waveform","WF","numberOfChannels","decodeing","channelNum","setAutoAlign","setLoopPlayback","defaultChecked","checked","fill","Storage","parse","localStorage","getItem","assign","setItem","removeItem","googleTranslate","query","lang","searchParams","translate","limit","pLimit","all","history","inTranslation","worker","Worker","defaultLang","navigator","setLanguage","setCurrentIndex","setSubtitles","setLocale","saveToHistory","shift","clone","postMessage","initSubtitles","storageSubs","onmessage","useMemo","copySubtitles","previous","check","removeSubtitles","Fragment","GlobalStyle","Boolean","location","hostname","setTranslations","i18n","minimum","ReactDOM","test","userAgent","App","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ecf8226c.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    body {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;\n        line-height: 1.5;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: #1c1f2f;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n`;\n","const en = {\n    open: 'Open',\n    save: 'Save',\n    undo: 'Undo',\n    clear: 'Clear',\n    help: 'Help',\n    donate: 'Donate',\n    confirm: 'Confirm',\n    delete: 'Delete',\n    insert: 'Insert Next',\n    merge: 'Merge Next',\n\n    'open-subtitle': 'Open Subtitle',\n    'open-subtitle-supports': 'Supports opening .vtt, .srt and .ass subtitle',\n    'open-subtitle-success': 'Open subtitles successfully',\n    'open-subtitle-error': 'Failed to open subtitles',\n\n    'open-video': 'Open Video',\n    'open-video-supports': 'Supports opening .mp4, .webm and .ogg video',\n    'open-video-warning':\n        'The files are opened locally and no data is uploaded. When creating an audio waveform, the browser may be blocked for a short time due to audio decoding, so it is not suitable for opening too large video files.',\n    'open-video-success': 'Open video successfully',\n    'open-video-error': 'Failed to open video',\n\n    'clear-warning': 'This step cannot be rolled back. Are you sure ?',\n    'clear-success': 'Clear all subtitles data successfully',\n\n    'help-info':\n        'This editor is suitable for video with small volume and simple subtitle effect. For large file videos or more subtitle effect, please use professional desktop software.',\n    'help-issue': 'You can ask any questions on Github Issue:',\n    'help-email': 'Or contact me via email:',\n\n    'donate-info':\n        'Or you can buy me a cup of coffee to encourage me to continue to update and improve the subtitle editor.',\n    'donate-weChatPay': 'WeChat Pay:',\n    'donate-alipay': 'Alipay:',\n\n    'history-rollback': 'History rollback successful',\n    'history-empty': 'History is empty',\n\n    'translation-success': 'Translation successful',\n    'translation-progress': 'Translation in progress',\n    'translation-limit': 'Limit 1000 translations per batch',\n\n    waveform: 'Waveform:',\n    size: 'Size:',\n    decode: 'Decode:',\n    channel: 'Channel:',\n    duration: 'Duration:',\n    zoom: 'Zoom:',\n    metronome: 'Metronome:',\n    export: 'Export',\n    'export-video': 'Export Video',\n    'parameter-error': 'Parameter error',\n    'keep-one': 'Please keep at least one subtitle',\n    'subtitle-text': '[Subtitle Text]',\n    'time-offset': 'Time Offset:',\n    'music-recognition': 'music recognition',\n    'common-recognition': 'all recognition',\n    'speech-recognition': 'smart subtitle:',\n    'google-translate': 'Google Translate:',\n    'subtitle-style': 'Style:',\n    'subtitle-size': 'Size',\n    'subtitle-bottom': 'Bottom',\n    'subtitle-color': 'Color',\n    'auto-align': 'Auto Align:',\n    'loop-playback': 'Loop Playback:',\n    'subtitle-template': 'Template:',\n    'subtitle-font': 'Font:',\n    'synthetic-video-ing': 'compositing video...',\n    'recognition-subtitle-ing': 'recognition ing...',\n\n};\n\nconst zh = {\n    open: '',\n    save: '',\n    undo: '',\n    clear: '',\n    help: '',\n    donate: '',\n    confirm: '',\n\n    delete: '',\n    insert: '',\n    merge: '',\n\n    'open-subtitle': '',\n    'open-subtitle-supports': ' .vtt, .srt  .ass ',\n    'open-subtitle-success': '',\n    'open-subtitle-error': '',\n\n    'open-video': '',\n    'open-video-supports': ' .mp4, .webm  .ogg ',\n    'open-video-warning':\n        '',\n    'open-video-success': '',\n    'open-video-error': '',\n\n    'clear-warning': '?',\n    'clear-success': '',\n\n    'help-info': '',\n    'help-issue': 'Github:',\n    'help-email': ':',\n\n    'donate-info': '',\n    'donate-weChatPay': ':',\n    'donate-alipay': ':',\n\n    'history-rollback': '',\n    'history-empty': '',\n\n    'translation-success': '',\n    'translation-progress': '',\n    'translation-limit': '1000',\n\n    waveform: ':',\n    size: ':',\n    decode: ':',\n    channel: ':',\n    duration: ':',\n    zoom: ':',\n    metronome: ':',\n    export: '',\n    'export-video': '',\n    'parameter-error': '',\n    'keep-one': '',\n    'subtitle-text': '[]',\n    'time-offset': ':',\n    'speech-recognition': ':',\n    'google-translate': ':',\n    'subtitle-style': ':',\n    'subtitle-size': '',\n    'subtitle-bottom': '',\n    'subtitle-color': '',\n    'auto-align': ':',\n    'loop-playback': ':',\n    'music-recognition': '',\n    'common-recognition': '',\n    'subtitle-template': ':',\n    'subtitle-font': ':',\n    'synthetic-video-ing': '...',\n    'recognition-subtitle-ing': '...',\n\n};\n\nexport default {\n    en,\n    zh,\n    'zh-cn': zh,\n    'zh-tw': zh,\n};\n\nexport const names = {\n    en: 'EN',\n    zh: '',\n};\n\nexport const getName = (key) => {\n    return (\n        {\n            en: 'en',\n            zh: 'zh',\n            'zh-cn': 'zh',\n            'zh-tw': 'zh',\n        }[key] || 'en'\n    );\n};\n","import DT from 'duration-time-conversion';\nimport {toast} from 'react-toastify';\nimport md5 from \"md5\";\n\nexport function isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);\n}\n\nexport function getExt(url) {\n    if (url.includes('?')) {\n        return getExt(url.split('?')[0]);\n    }\n\n    if (url.includes('#')) {\n        return getExt(url.split('#')[0]);\n    }\n\n    return url\n        .trim()\n        .toLowerCase()\n        .split('.')\n        .pop();\n}\n\nexport function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function secondToTime(seconds = 0) {\n    return DT.d2t(seconds.toFixed(3));\n}\n\nexport function timeToSecond(time) {\n    return DT.t2d(time);\n}\n\nexport function downloadFile(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}\n\nexport function notify(text = '', type = 'info') {\n    // info success warning error default\n    return (\n        text.trim() &&\n        toast[type](text, {\n            position: 'top-center',\n            autoClose: 2000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n        })\n    );\n}\n\nexport function getKeyCode(event) {\n    const tag = document.activeElement.tagName.toUpperCase();\n    const editable = document.activeElement.getAttribute('contenteditable');\n    if (tag !== 'INPUT' && tag !== 'TEXTAREA' && editable !== '' && editable !== 'true') {\n        return Number(event.keyCode);\n    }\n}\n\nexport function toHex(number) {\n    let res = (number).toString(16);\n    return res.length===1 ? \"0\"+res : res;\n}\n\nexport async function syntheticVideo(options,storage) {\n    let videoBlobId=await uploadVideoFile(options.videoUrl);\n    let fontColor = storage.get(\"color\");\n    let requestId=uuidv4();\n    let secret = \"fytubjnf\" + \"tyguhjn56\" + \"7uygkjn6\" + \"5f7ygui\";\n    let params = {\n        \"supportTranslate\": false,\n        \"videoWidth\": storage.get(\"metadata\").videoWidth,\n        \"videoHeight\": storage.get(\"metadata\").videoHeight,\n        \"templateId\": options.templateId,\n        \"requestId\": requestId,\n        \"showAss\": false,\n        \"primaryColour\": fontColor?\"&H00\"+toHex(fontColor.b)+toHex(fontColor.g)+toHex(fontColor.r):\"\",\n        \"fontId\": options.fontId,\n        \"syntheticVideo\": true,\n        \"alignment\": 2,\n        \"marginv\": storage.get(\"bottom\"),\n        \"fontsize\": storage.get(\"fontSize\"),\n        \"blobKey\": videoBlobId,\n        \"sign\": md5(secret + requestId + videoBlobId),\n        \"lines\": storage.get(\"subtitles\").map(item => {\n            return {\"startTime\": timeToSecond(item.start).toFixed(2), \"endTime\": timeToSecond(item.end).toFixed(2), \"words\": item.text}\n        })\n    };\n    let rawResponse = await fetch('https://getsubtitle.kxiaofan.com/rest/n/app/ks/grpc/createAssContent', {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        mode:\"cors\",\n        body: JSON.stringify(params)\n    });\n    let content = await rawResponse.json();\n    return content.videoUrl;\n}\n\nexport function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\nexport const uploadFile = async (blob) => {\n    let formdata = new FormData();\n    let blobFile = await fetch(blob).then(r => r.blob());\n    blobFile.lastModifiedDate = new Date();\n    blobFile.name = new Date().getTime() + \".wav\";\n\n    formdata.append('file', blobFile, blobFile.name);\n    let res = await fetch(\"https://getsubtitle.kxiaofan.com/rest/n/ty/cdn/file/cdn/uploadVideoBlobstore\", {\n        method: 'POST',\n        body: formdata,\n    }).catch(error => console.log(error));\n    let resJson = await res.json();\n    return resJson.blobstoreId;\n}\n\nexport async function uploadVideoFile(videoUrl)\n{\n    let formdata = new FormData();\n    let blobFile = await fetch(videoUrl).then(r => r.blob());\n    blobFile.lastModifiedDate = new Date();\n    blobFile.name = new Date().getTime() + '.mp4';\n\n    formdata.append('file', blobFile, blobFile.name);\n    let res = await fetch(\"https://getsubtitle.kxiaofan.com/rest/n/ty/cdn/file/cdn/uploadVideoBlobstore\", {\n        method: 'POST',\n        body: formdata,\n    }).catch(error => console.error(error));\n    let resJson = await res.json();\n    console.log(resJson);\n    return resJson.blobstoreId;\n}\n","import clamp from 'lodash/clamp';\nimport { timeToSecond, secondToTime } from '../utils';\n\nexport default class Sub {\n    constructor(start, end, text) {\n        this.start = start;\n        this.end = end;\n        this.text = text;\n    }\n\n    get check() {\n        return this.startTime >= 0 && this.endTime >= 0 && this.startTime < this.endTime;\n    }\n\n    get clone() {\n        return new Sub(this.start, this.end, this.text);\n    }\n\n    get startTime() {\n        return timeToSecond(this.start);\n    }\n\n    set startTime(time) {\n        this.start = secondToTime(clamp(time, 0, Infinity));\n    }\n\n    get endTime() {\n        return timeToSecond(this.end);\n    }\n\n    set endTime(time) {\n        this.end = secondToTime(clamp(time, 0, Infinity));\n    }\n\n    get duration() {\n        return (this.endTime - this.startTime).toFixed(3);\n    }\n}\n","import { getExt, secondToTime } from '../utils';\nimport Sub from './sub';\n\nexport function checkIsFile(source) {\n    return source instanceof File;\n}\n\nexport function getType(source) {\n    return checkIsFile(source) ? getExt(source.name) : getExt(source);\n}\n\nexport async function getVtt(source) {\n    if (checkIsFile(source)) {\n        return await getVttFromFile(source);\n    } else {\n        return await getVttFromUrl(source);\n    }\n}\n\nexport function vttToUrl(vtt) {\n    return URL.createObjectURL(\n        new Blob([vtt], {\n            type: 'text/vtt',\n        }),\n    );\n}\n\nexport function vttToUrlUseWorker() {\n    return URL.createObjectURL(\n        new Blob([\n            `onmessage = event => {\n                postMessage(URL.createObjectURL(\n                    new Blob([\n                        \\`WEBVTT\n\n                        \\${event.data.map((item, index) => \\`\n                        \\${index + 1}\n                        \\${item.start} --> \\${item.end}\n                        \\${item.text}\\`).join('\\\\n\\\\n')}\n                        \\`\n                    ], {\n                        type: 'text/vtt',\n                    }),\n                ))\n            }`,\n        ]),\n    );\n}\n\nexport function subToVtt(sub) {\n    return (\n        'WEBVTT\\n\\n' +\n        sub\n            .map((item, index) => {\n                return index + 1 + '\\n' + item.start + ' --> ' + item.end + '\\n' + item.text;\n            })\n            .join('\\n\\n')\n    );\n}\n\nexport async function getVttFromFile(file) {\n    return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = () => {\n            switch (getType(file)) {\n                case 'vtt':\n                    resolve(reader.result.replace(/{[\\s\\S]*?}/g, ''));\n                    break;\n                case 'ass':\n                    resolve(assToVtt(reader.result));\n                    break;\n                case 'srt':\n                    resolve(srtToVtt(reader.result));\n                    break;\n                default:\n                    resolve();\n                    break;\n            }\n        };\n        reader.readAsText(file);\n    });\n}\n\nexport async function getVttFromUrl(url) {\n    return new Promise(async resolve => {\n        const response = await fetch(url);\n        const result = await response.text();\n        switch (getType(url)) {\n            case 'vtt':\n                resolve(result.replace(/{[\\s\\S]*?}/g, ''));\n                break;\n            case 'ass':\n                resolve(assToVtt(result));\n                break;\n            case 'srt':\n                resolve(srtToVtt(result));\n                break;\n            default:\n                resolve();\n                break;\n        }\n    });\n}\n\nexport function assToVtt(ass) {\n    const re_ass = new RegExp(\n        'Dialogue:\\\\s\\\\d,' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '([^,]*),' +\n            '([^,]*),' +\n            '(?:[^,]*,){4}' +\n            '([\\\\s\\\\S]*)$',\n        'i',\n    );\n\n    function fixTime(time = '') {\n        return time\n            .split(/[:.]/)\n            .map((item, index, arr) => {\n                if (index === arr.length - 1) {\n                    if (item.length === 1) {\n                        return '.' + item + '00';\n                    } else if (item.length === 2) {\n                        return '.' + item + '0';\n                    }\n                } else {\n                    if (item.length === 1) {\n                        return (index === 0 ? '0' : ':0') + item;\n                    }\n                }\n\n                return index === 0 ? item : index === arr.length - 1 ? '.' + item : ':' + item;\n            })\n            .join('');\n    }\n\n    return (\n        'WEBVTT\\n\\n' +\n        ass\n            .split(/\\r?\\n/)\n            .map(line => {\n                const m = line.match(re_ass);\n                if (!m) return null;\n                return {\n                    start: fixTime(m[1].trim()),\n                    end: fixTime(m[2].trim()),\n                    text: m[5]\n                        .replace(/{[\\s\\S]*?}/g, '')\n                        .replace(/(\\\\N)/g, '\\n')\n                        .trim()\n                        .split(/\\r?\\n/)\n                        .map(item => item.trim())\n                        .join('\\n'),\n                };\n            })\n            .filter(line => line)\n            .map((line, index) => {\n                if (line) {\n                    return index + 1 + '\\n' + line.start + ' --> ' + line.end + '\\n' + line.text;\n                } else {\n                    return '';\n                }\n            })\n            .filter(line => line.trim())\n            .join('\\n\\n')\n    );\n}\n\nexport function srtToVtt(srt) {\n    return 'WEBVTT \\r\\n\\r\\n'.concat(\n        srt\n            .replace(/\\{\\\\([ibu])\\}/g, '</$1>')\n            .replace(/\\{\\\\([ibu])1\\}/g, '<$1>')\n            .replace(/\\{([ibu])\\}/g, '<$1>')\n            .replace(/\\{\\/([ibu])\\}/g, '</$1>')\n            .replace(/(\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d)/g, '$1.$2')\n            .replace(/{[\\s\\S]*?}/g, '')\n            .concat('\\r\\n\\r\\n'),\n    );\n}\n\nexport async function getSubFromVttUrl(url) {\n    return new Promise(resolve => {\n        const $video = document.createElement('video');\n        const $track = document.createElement('track');\n        $track.default = true;\n        $track.kind = 'metadata';\n        $video.appendChild($track);\n        $track.onload = () => {\n            resolve(\n                Array.from($track.track.cues).map(item => {\n                    const start = secondToTime(item.startTime);\n                    const end = secondToTime(item.endTime);\n                    const text = item.text;\n                    return new Sub(start, end, text);\n                }),\n            );\n        };\n        $track.src = url;\n    });\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport NProgress from 'nprogress';\nimport { notify } from '../utils';\nimport { getVtt, vttToUrl, getSubFromVttUrl } from '../subtitle';\nimport { t, Translate } from 'react-i18nify';\n\nconst Upload = styled.div`\n    .item {\n        margin-bottom: 20px;\n        .title {\n            color: #fff;\n            font-size: 14px;\n            padding: 5px 10px;\n            margin-bottom: 10px;\n            border-left: 2px solid #03a9f4;\n        }\n        .centent {\n            padding: 0 10px;\n            .upload {\n                position: relative;\n                margin-bottom: 10px;\n                .input {\n                    width: 100%;\n                    height: 30px;\n                    line-height: 30px;\n                    padding: 0 10px;\n                    outline: none;\n                    border: none;\n                    color: #fff;\n                    background-color: #363952;\n                }\n                .file {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    bottom: 0;\n                    line-height: 1;\n                    height: 100%;\n                    width: 100px;\n                    color: #fff;\n                    background-color: #2196f3;\n\n                    input {\n                        position: absolute;\n                        left: 0;\n                        top: 0;\n                        right: 0;\n                        bottom: 0;\n                        width: 100%;\n                        height: 100%;\n                        opacity: 0;\n                    }\n                }\n            }\n            .info {\n                font-size: 12px;\n                color: rgba(255, 255, 255, 0.5);\n                margin-bottom: 10px;\n            }\n            .warning {\n                font-size: 12px;\n                padding: 5px;\n                color: #fff;\n                background-color: rgba(199, 81, 35, 0.5);\n                border: 1px solid rgba(199, 81, 35, 1);\n            }\n        }\n    }\n`;\n\nexport default function({ player, storage, options, setOption, updateSubtitles }) {\n    async function openSubtitle(file) {\n        if (file) {\n            NProgress.start().set(0.5);\n            try {\n                const vttText = await getVtt(file);\n                if (vttText) {\n                    const subtitleUrl = vttToUrl(vttText);\n                    updateSubtitles(await getSubFromVttUrl(subtitleUrl));\n                    player.subtitle.switch(subtitleUrl);\n                    setOption({ subtitleUrl, uploadDialog: false });\n                    notify(t('open-subtitle-success'));\n                } else {\n                    notify(t('open-subtitle-error'), 'error');\n                }\n            } catch (error) {\n                notify(error.message, 'error');\n            }\n            NProgress.done();\n        }\n    }\n\n    function openVideo(file) {\n        if (file) {\n            NProgress.start().set(0.5);\n            if (typeof file === 'string') {\n                player.url = file;\n                setOption({ videoUrl: file, uploadDialog: false });\n                notify(t('open-video-success'));\n            } else {\n                const $video = document.createElement('video');\n                const canPlayType = $video.canPlayType(file.type);\n                if (canPlayType === 'maybe' || canPlayType === 'probably') {\n                    const videoUrl = URL.createObjectURL(file);\n                    player.url = videoUrl;\n                    setOption({ videoUrl: videoUrl, uploadDialog: false });\n                    notify(t('open-video-success'));\n                } else {\n                    notify(t('open-video-error'), 'error');\n                }\n            }\n            NProgress.done();\n        }\n    }\n\n    return (\n        <Upload>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"open-subtitle\" />\n                </div>\n                <div className=\"centent\">\n                    <div className=\"upload\">\n                        <input\n                            disabled\n                            value={options.subtitleUrl}\n                            type=\"text\"\n                            className=\"input\"\n                            spellCheck=\"false\"\n                            onChange={event => openSubtitle(event.target.value)}\n                        />\n                        <div className=\"file\">\n                            <Translate value=\"open\" />\n                            <input type=\"file\" onChange={event => openSubtitle(event.target.files[0])} />\n                        </div>\n                    </div>\n                    <div className=\"info\">\n                        <Translate value=\"open-subtitle-supports\" />\n                    </div>\n                </div>\n            </div>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"open-video\" />\n                </div>\n                <div className=\"centent\">\n                    <div className=\"upload\">\n                        <input\n                            disabled\n                            value={options.videoUrl}\n                            type=\"text\"\n                            className=\"input\"\n                            spellCheck=\"false\"\n                            onChange={event => openVideo(event.target.value)}\n                        />\n                        <div className=\"file\">\n                            <Translate value=\"open\" />\n                            <input type=\"file\" onChange={event => openVideo(event.target.files[0])} />\n                        </div>\n                    </div>\n                    <div className=\"info\">\n                        <Translate value=\"open-video-supports\" />\n                    </div>\n                </div>\n            </div>\n        </Upload>\n    );\n}\n","import React, {useState, useEffect} from 'react';\nimport styled from 'styled-components';\nimport download from 'downloadjs';\nimport {syntheticVideo} from '../utils';\nimport {t, Translate} from 'react-i18nify';\nimport {Spin, Space,Button} from 'antd';\nimport ArtplayerComponent from 'artplayer-react';\nimport { Input } from 'antd';\nimport { DownloadOutlined } from '@ant-design/icons';\n\nconst SyntheticVideo = styled.div`\n    .item {\n        margin-bottom: 20px;\n        .title {\n            color: #fff;\n            font-size: 14px;\n            padding: 5px 10px;\n            margin-bottom: 10px;\n            border-left: 2px solid #03a9f4;\n        }\n        .centent {\n            padding: 0 10px;\n            text-align: center;\n\n            .info {\n                font-size: 12px;\n                color: rgba(255, 255, 255, 0.5);\n                margin-bottom: 10px;\n            }\n            .warning {\n                font-size: 12px;\n                padding: 5px;\n                color: #fff;\n                background-color: rgba(199, 81, 35, 0.5);\n                border: 1px solid rgba(199, 81, 35, 1);\n            }\n        }\n    }\n`;\n\nexport default function ({options, storage}) {\n    const [videoUrl, setVideoUrl] = useState(\"\");\n    const [synthesis, setSynthesis] = useState(1);\n\n    async function synthesising(options, storage){\n        setSynthesis(2);\n        setVideoUrl(await syntheticVideo(options, storage));\n        setSynthesis(3);\n    }\n    useEffect(() => {\n        synthesising(options, storage);\n    }, []);\n    return (\n        <SyntheticVideo>\n            <div className=\"item\">\n                <div className=\"centent\">\n                    {synthesis===1 &&\n                    <Button type=\"primary\" onClick={()=>synthesising(options, storage)}></Button>\n                    }\n                    {synthesis===2 &&\n                    <Space size=\"middle\">\n                        <Spin size=\"large\"/>\n                        <Translate value=\"synthetic-video-ing\"/>\n                    </Space>\n                    }\n                    {synthesis===3 &&\n                    <div style={{height: \"300px\"}}>\n                        <ArtplayerComponent\n                            style={{\n                                width: '100%',\n                                height: '80%',\n                            }}\n                            option={{\n                                url: videoUrl,\n                                loop: true,\n                                autoSize: true,\n                                aspectRatio: true,\n                                playbackRate: true,\n                                fullscreen: true,\n                                fullscreenWeb: true,\n                                miniProgressBar: true,\n                                moreVideoAttr: {\n                                    crossOrigin: 'anonymous',\n                                    preload: 'auto',\n                                },\n                            }}\n                        />\n                        <div className=\"info\">\n                            <br/>\n                            <Input defaultValue={videoUrl} disable=\"true\" addonAfter={<DownloadOutlined onClick={()=>download(videoUrl)} />} />\n                        </div>\n                    </div>\n                    }\n                </div>\n            </div>\n        </SyntheticVideo>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Dialog = styled.div`\n    position: fixed;\n    z-index: 99;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0, 0, 0, 0.6);\n\n    .dialog-inner {\n        min-height: 200px;\n        background-color: #1f2133;\n        border-radius: 3px;\n        overflow: hidden;\n        opacity: 0;\n        margin-top: -10px;\n        transition: all 0.2s ease 0s;\n        box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.5);\n\n        .dialog-title {\n            position: relative;\n            border-bottom: 1px solid #000;\n            background-color: #2a2c3c;\n            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n            color: #fff;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 10px 0;\n            margin-bottom: 10px;\n            font-size: 16px;\n        }\n\n        .dialog-cancel {\n            position: absolute;\n            right: 10px;\n            top: 10px;\n            cursor: pointer;\n            opacity: 0.5;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n\n        &.dialog-active {\n            opacity: 1;\n            margin-top: 0;\n        }\n    }\n`;\n\nexport default function(props) {\n    const [activeName, setActiveName] = useState('');\n\n    useEffect(() => {\n        setTimeout(() => setActiveName('dialog-active'), 100);\n    }, []);\n\n    return (\n        <Dialog>\n            <div\n                style={{ width: props.width || 500 }}\n                className={`dialog-inner ${activeName}`}\n                onClick={event => event.stopPropagation()}\n            >\n                <div className=\"dialog-title\">\n                    {props.title || 'Title'}{' '}\n                    <i className=\"dialog-cancel icon-cancel\" onClick={() => props.onClose()}></i>\n                </div>\n                <div className=\"dialog-content\">{props.children}</div>\n            </div>\n        </Dialog>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Translate } from 'react-i18nify';\nimport { Descriptions } from 'antd';\n\nconst Help = styled.div`\n    .item {\n        margin-bottom: 20px;\n        .title {\n            color: #fff;\n            font-size: 14px;\n            padding: 5px 10px;\n            margin-bottom: 10px;\n            border-left: 2px solid #03a9f4;\n        }\n        .centent {\n            padding: 0 10px;\n            .upload {\n                position: relative;\n                margin-bottom: 10px;\n                .input {\n                    width: 100%;\n                    height: 30px;\n                    line-height: 30px;\n                    padding: 0 10px;\n                    outline: none;\n                    border: none;\n                    color: #fff;\n                    background-color: #363952;\n                }\n                .file {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    bottom: 0;\n                    line-height: 1;\n                    height: 100%;\n                    width: 100px;\n                    color: #fff;\n                    background-color: #2196f3;\n\n                    input {\n                        position: absolute;\n                        left: 0;\n                        top: 0;\n                        right: 0;\n                        bottom: 0;\n                        width: 100%;\n                        height: 100%;\n                        opacity: 0;\n                    }\n                }\n            }\n            .info {\n                font-size: 12px;\n                color: rgba(255, 255, 255, 0.5);\n                margin-bottom: 10px;\n            }\n            .warning {\n                font-size: 12px;\n                padding: 5px;\n                color: #fff;\n                background-color: rgba(199, 81, 35, 0.5);\n                border: 1px solid rgba(199, 81, 35, 1);\n            }\n        }\n    }\n`;\n\nexport default function() {\n    return (\n        <Help>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <p></p>\n                </div>\n                <div style={{textAlign: \"center\"}} className=\"centent\">\n                    <img height=\"140px\" src=\"https://static.yximgs.com/udata/pkg/KMOVIE-CDN/Snip20201218_14.png\"/>\n                    <div style={{textAlign: \"left\",marginLeft:\"38px\"}}>\n                        <p><span style={{color:\"#14f1ba\"}}>:</span> </p>\n                        <p style={{marginTop:\"-10px\"}}><span style={{color:\"#14f1ba\"}}>:</span> </p>\n                    </div>\n\n                </div>\n            </div>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <p></p>\n                </div>\n                <div style={{textAlign: \"center\"}} className=\"centent\">\n                    <img src=\"https://static.yximgs.com/udata/pkg/KMOVIE-CDN/Snip20201218_15.png\" height=\"180px\"/>\n                    <div style={{textAlign: \"left\",marginLeft:\"38px\"}}>\n                        <p><span style={{color:\"#14f1ba\"}}>:</span>  &nbsp;&nbsp;<span style={{color:\"#14f1ba\"}}>:</span>  &nbsp;&nbsp;<span style={{color:\"#14f1ba\"}}>:</span> </p>\n                        <p style={{marginTop:\"-10px\"}}><span style={{color:\"#14f1ba\"}}>:</span> ()</p>\n                        <p style={{marginTop:\"-10px\"}}><span style={{color:\"#14f1ba\"}}>:</span> ()</p>\n                    </div>\n                </div>\n            </div>\n        </Help>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { names, getName } from '../i18n';\nimport Upload from './Upload';\nimport SyntheticVideo from './SyntheticVideo';\nimport Dialog from './Dialog';\nimport {downloadFile, syntheticVideo} from '../utils';\nimport { vttToUrl, subToVtt } from '../subtitle';\nimport { t, Translate } from 'react-i18nify';\nimport Help from \"./Help\";\nimport {\n    UsergroupAddOutlined,\n} from '@ant-design/icons';\n\nconst Header = styled.div`\n    position: relative;\n    display: flex;\n    height: 50px;\n    align-items: center;\n    justify-content: space-between;\n    background-color: #1f2133;\n    border-bottom: 1px solid rgb(0, 0, 0);\n`;\n\nconst Left = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n`;\n\nconst Right = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n\n    .aimu {\n        display: flex;\n        align-items: center;\n        color: #FFEB3B;\n        padding-right: 30px;\n        font-size: 14px;\n        text-decoration: none;\n        animation: animation 3s infinite;\n\n        img {\n            margin-right: 10px;\n        }\n\n        @keyframes animation {\n            50% {\n                color: #00bcd4;\n            }\n        }\n    }\n`;\n\nconst Logo = styled.a`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 22px;\n    height: 100%;\n    cursor: pointer;\n    padding: 0 15px;\n    color: rgba(255, 255, 255, 1);\n    transition: all 0.2s ease 0s;\n    border-right: 1px solid rgb(0, 0, 0);\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    text-decoration: none;\n\n    &:hover {\n        background-color: #2196f3;\n    }\n`;\n\nconst Menu = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n    height: 100%;\n    cursor: pointer;\n    padding: 0 25px;\n    color: rgba(255, 255, 255, 1);\n    transition: all 0.2s ease 0s;\n    border-right: 1px solid rgb(0, 0, 0);\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n\n    &:hover {\n        background-color: #2196f3;\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nconst I18n = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n    height: 100%;\n    padding: 0 10px;\n    color: rgba(255, 255, 255, 1);\n    border-left: 1px solid rgb(0, 0, 0);\n    background-color: rgb(26, 83, 109);\n\n    i {\n        margin-right: 5px;\n    }\n\n    select {\n        outline: none;\n    }\n`;\n\nexport default function (props) {\n    return (\n        <Header>\n            <Left>\n                <Logo href=\"/\">\n                    <i className=\"icon-cc\"></i>\n                </Logo>\n                <Menu onClick={() => props.setOption({ uploadDialog: true })}>\n                    <i className=\"icon-upload\"></i>\n                    <Translate value=\"open\" />\n                </Menu>\n                <Menu onClick={() => downloadFile(vttToUrl(subToVtt(props.subtitles)), `${Date.now()}.vtt`)}>\n                    <i className=\"icon-download\"></i>\n                    <Translate value=\"save\" />\n                </Menu>\n                <Menu onClick={() => props.setOption({ syntheticVideoDialog: true })}>\n                    <i className=\"icon-file-video\"></i>\n                    <Translate value=\"export-video\" />\n                </Menu>\n                <Menu onClick={() => props.undoSubtitles()}>\n                    <i className=\"icon-ccw\"></i>\n                    <Translate value=\"undo\" />\n                </Menu>\n                <Menu\n                    onClick={() => {\n                        if (window.confirm(t('clear-warning'))) {\n                            props.cleanSubtitles();\n                        }\n                    }}\n                >\n                    <i className=\"icon-trash-empty\"></i>\n                    <Translate value=\"clear\" />\n                </Menu>\n                <Menu onClick={() => props.setOption({ helpDialog: true })}>\n                    <i className=\"icon-help-circled\"></i>\n                    <Translate value=\"help\" />\n                </Menu>\n            </Left>\n            <Right>\n                <div style={{display: \"inline-grid\"}}>\n                    <a href=\"https://v.kuaishou.com/4Uv9DC\" target=\"_blank\"><UsergroupAddOutlined /> </a>\n                    <span style={{fontSize: \"10px\"}}> power by@subplayer.js &nbsp;&nbsp;</span>\n                </div>\n                <I18n>\n                    <i className=\"icon-language\"></i>\n                    <select style={{color:\"#000000\"}} value={getName(props.language)} onChange={(event) => props.updateLang(event.target.value)}>\n                        {Object.keys(names).map((key) => (\n                            <option key={key} value={key}>\n                                {names[key]}\n                            </option>\n                        ))}\n                    </select>\n                </I18n>\n            </Right>\n            {props.options.uploadDialog ? (\n                <Dialog title={t('open')} onClose={() => props.setOption({ uploadDialog: false })}>\n                    <Upload {...props} />\n                </Dialog>\n            ) : null}\n            {props.options.syntheticVideoDialog ? (\n                <Dialog title={t('export-video')} onClose={() => props.setOption({ syntheticVideoDialog: false })}>\n                    <SyntheticVideo {...props} />\n                </Dialog>\n            ) : null}\n            {props.options.helpDialog ? (\n                <Dialog title={t('help')} onClose={() => props.setOption({ helpDialog: false })}>\n                    <Help {...props} />\n                </Dialog>\n            ) : null}\n        </Header>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ArtplayerComponent from 'artplayer-react';\n\nconst Player = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 70%;\n    width: 100%;\n    padding: 20px;\n    background-color: rgba(0, 0, 0, 0.5);\n`;\n\nexport default React.memo(\n    function ({options, storage, setOption, setPlayer, setCurrentTime}) {\n        return (\n            <Player>\n                <ArtplayerComponent\n                    style={{\n                        width: '100%',\n                        height: '100%',\n                    }}\n                    option={{\n                        url: options.videoUrl,\n                        loop: true,\n                        autoSize: true,\n                        aspectRatio: true,\n                        playbackRate: true,\n                        fullscreen: true,\n                        fullscreenWeb: true,\n                        miniProgressBar: true,\n                        subtitle: {\n                            url: options.subtitleUrl,\n                        },\n                        moreVideoAttr: {\n                            crossOrigin: 'anonymous',\n                            preload: 'auto',\n                        },\n                    }}\n                    getInstance={art => {\n                        setPlayer(art);\n                        (function loop() {\n                            window.requestAnimationFrame(() => {\n                                if (art.playing) {\n                                    setCurrentTime(art.currentTime);\n                                }\n                                loop();\n                            });\n                        })();\n\n                        art.on('seek', () => {\n                            setCurrentTime(art.currentTime);\n                        });\n\n                        art.on(\"video:canplay\", () => {\n                            const {$video} = art.template;\n                            console.log(\"videoHeight\", $video.videoHeight);\n                            storage.set(\"metadata\", {\"videoHeight\":$video.videoHeight, \"videoWidth\": $video.videoWidth})\n                        })\n                    }}\n                />\n            </Player>\n        );\n    },\n    () => true,\n);\n","// https://cloud.google.com/translate/docs/languages\n\nconst zh = [\n    { name: '', key: 'zh' },\n    { name: '', key: 'zh-TW' },\n    { name: '', key: 'en' },\n    { name: '', key: 'af' },\n    { name: '', key: 'sq' },\n    { name: '', key: 'am' },\n    { name: '', key: 'ar' },\n    { name: '', key: 'hy' },\n    { name: '', key: 'az' },\n    { name: '', key: 'eu' },\n    { name: '', key: 'be' },\n    { name: '', key: 'bn' },\n    { name: '', key: 'bs' },\n    { name: '', key: 'bg' },\n    { name: '', key: 'ca' },\n    { name: '', key: 'ceb' },\n    { name: '', key: 'co' },\n    { name: '', key: 'hr' },\n    { name: '', key: 'cs' },\n    { name: '', key: 'da' },\n    { name: '', key: 'nl' },\n    { name: '', key: 'eo' },\n    { name: '', key: 'et' },\n    { name: '', key: 'fi' },\n    { name: '', key: 'fr' },\n    { name: '', key: 'fy' },\n    { name: '', key: 'gl' },\n    { name: '', key: 'ka' },\n    { name: '', key: 'de' },\n    { name: '', key: 'el' },\n    { name: '', key: 'gu' },\n    { name: '', key: 'ht' },\n    { name: '', key: 'ha' },\n    { name: '', key: 'haw' },\n    { name: '', key: 'he' },\n    { name: '', key: 'hi' },\n    { name: '', key: 'hmn' },\n    { name: '', key: 'hu' },\n    { name: '', key: 'is' },\n    { name: '', key: 'ig' },\n    { name: '', key: 'id' },\n    { name: '', key: 'ga' },\n    { name: '', key: 'it' },\n    { name: '', key: 'ja' },\n    { name: '', key: 'jw' },\n    { name: '', key: 'kn' },\n    { name: '', key: 'kk' },\n    { name: '', key: 'km' },\n    { name: '', key: 'ko' },\n    { name: '', key: 'ku' },\n    { name: '', key: 'ky' },\n    { name: '', key: 'lo' },\n    { name: '', key: 'la' },\n    { name: '', key: 'lv' },\n    { name: '', key: 'lt' },\n    { name: '', key: 'lb' },\n    { name: '', key: 'mk' },\n    { name: '', key: 'mg' },\n    { name: '', key: 'ms' },\n    { name: '', key: 'ml' },\n    { name: '', key: 'mt' },\n    { name: '', key: 'mi' },\n    { name: '', key: 'mr' },\n    { name: '', key: 'mn' },\n    { name: '', key: 'my' },\n    { name: '', key: 'ne' },\n    { name: '', key: 'no' },\n    { name: '', key: 'ny' },\n    { name: '', key: 'ps' },\n    { name: '', key: 'fa' },\n    { name: '', key: 'pl' },\n    { name: '', key: 'pt' },\n    { name: '', key: 'pa' },\n    { name: '', key: 'ro' },\n    { name: '', key: 'ru' },\n    { name: '', key: 'sm' },\n    { name: '', key: 'gd' },\n    { name: '', key: 'sr' },\n    { name: '', key: 'st' },\n    { name: '', key: 'sn' },\n    { name: '', key: 'sd' },\n    { name: '', key: 'si' },\n    { name: '', key: 'sk' },\n    { name: '', key: 'sl' },\n    { name: '', key: 'so' },\n    { name: '', key: 'es' },\n    { name: '', key: 'su' },\n    { name: '', key: 'sw' },\n    { name: '', key: 'sv' },\n    { name: '', key: 'tl' },\n    { name: '', key: 'tg' },\n    { name: '', key: 'ta' },\n    { name: '', key: 'te' },\n    { name: '', key: 'th' },\n    { name: '', key: 'tr' },\n    { name: '', key: 'uk' },\n    { name: '', key: 'ur' },\n    { name: '', key: 'uz' },\n    { name: '', key: 'vi' },\n    { name: '', key: 'cy' },\n    { name: '', key: 'xh' },\n    { name: '', key: 'yi' },\n    { name: '', key: 'yo' },\n    { name: '', key: 'zu' },\n];\n\nconst en = [\n    { name: 'Chinese Simplified', key: 'zh' },\n    { name: 'Chinese Traditional', key: 'zh-TW' },\n    { name: 'English', key: 'en' },\n    { name: 'Afrikaans', key: 'af' },\n    { name: 'Albania', key: 'sq' },\n    { name: 'Amharic', key: 'am' },\n    { name: 'Arabic', key: 'ar' },\n    { name: 'Armenian', key: 'hy' },\n    { name: 'Azerbaijani', key: 'az' },\n    { name: 'Basque', key: 'eu' },\n    { name: 'Belarusian', key: 'be' },\n    { name: 'Bengali', key: 'bn' },\n    { name: 'Bosnia', key: 'bs' },\n    { name: 'Bulgarian', key: 'bg' },\n    { name: 'Catalan', key: 'ca' },\n    { name: 'Cebu language', key: 'ceb' },\n    { name: 'Corsican', key: 'co' },\n    { name: 'Croatian', key: 'hr' },\n    { name: 'Czech', key: 'cs' },\n    { name: 'Danish', key: 'da' },\n    { name: 'Dutch', key: 'nl' },\n    { name: 'Esperanto', key: 'eo' },\n    { name: 'Estonian', key: 'et' },\n    { name: 'Finnish', key: 'fi' },\n    { name: 'French', key: 'fr' },\n    { name: 'Friesian', key: 'fy' },\n    { name: 'Galician', key: 'gl' },\n    { name: 'Georgian', key: 'ka' },\n    { name: 'German', key: 'de' },\n    { name: 'Greek', key: 'el' },\n    { name: 'Gujarati', key: 'gu' },\n    { name: 'Haiti Creole', key: 'ht' },\n    { name: 'Hausa', key: 'ha' },\n    { name: 'Hawaiian', key: 'haw' },\n    { name: 'Hebrew', key: 'he' },\n    { name: 'Hindi', key: 'hi' },\n    { name: 'Hmong', key: 'hmn' },\n    { name: 'Hungarian', key: 'hu' },\n    { name: 'Icelandic', key: 'is' },\n    { name: 'Ibo', key: 'ig' },\n    { name: 'Indonesian', key: 'id' },\n    { name: 'Irish', key: 'ga' },\n    { name: 'Italian', key: 'it' },\n    { name: 'Japanese', key: 'ja' },\n    { name: 'Javanese', key: 'jw' },\n    { name: 'Kannada', key: 'kn' },\n    { name: 'Kazakh', key: 'kk' },\n    { name: 'Khmer text', key: 'km' },\n    { name: 'Korean', key: 'ko' },\n    { name: 'Kurdish', key: 'ku' },\n    { name: 'Kyrgyz', key: 'ky' },\n    { name: 'Laotian', key: 'lo' },\n    { name: 'Latin', key: 'la' },\n    { name: 'Latvian', key: 'lv' },\n    { name: 'Lithuania', key: 'lt' },\n    { name: 'Luxembourg', key: 'lb' },\n    { name: 'Macedonian', key: 'mk' },\n    { name: 'Malagasy', key: 'mg' },\n    { name: 'Malay', key: 'ms' },\n    { name: 'Malayalam', key: 'ml' },\n    { name: 'Malta', key: 'mt' },\n    { name: 'Maori', key: 'mi' },\n    { name: 'Marathi', key: 'mr' },\n    { name: 'Mongolian', key: 'mn' },\n    { name: 'Burmese', key: 'my' },\n    { name: 'Nepalese', key: 'ne' },\n    { name: 'Norwegian', key: 'no' },\n    { name: 'Nyanza', key: 'ny' },\n    { name: 'Pashto', key: 'ps' },\n    { name: 'Persian', key: 'fa' },\n    { name: 'Polish', key: 'pl' },\n    { name: 'Portuguese', key: 'pt' },\n    { name: 'Punjabi', key: 'pa' },\n    { name: 'Romanian', key: 'ro' },\n    { name: 'Russian', key: 'ru' },\n    { name: 'Samoan', key: 'sm' },\n    { name: 'Scottish Gaelic', key: 'gd' },\n    { name: 'Serbian', key: 'sr' },\n    { name: 'Sesotho', key: 'st' },\n    { name: 'Shanna', key: 'sn' },\n    { name: 'Sin German', key: 'sd' },\n    { name: 'Sinhala', key: 'si' },\n    { name: 'Slovakian', key: 'sk' },\n    { name: 'Slovenian', key: 'sl' },\n    { name: 'Somali', key: 'so' },\n    { name: 'Spanish', key: 'es' },\n    { name: 'Sundanese', key: 'su' },\n    { name: 'Swahili', key: 'sw' },\n    { name: 'Swedish', key: 'sv' },\n    { name: 'Tagalogian', key: 'tl' },\n    { name: 'Tajik', key: 'tg' },\n    { name: 'Tamil', key: 'ta' },\n    { name: 'Telugu', key: 'te' },\n    { name: 'Thai', key: 'th' },\n    { name: 'Turkish', key: 'tr' },\n    { name: 'Ukrainian', key: 'uk' },\n    { name: 'Urdu', key: 'ur' },\n    { name: 'Uzbek', key: 'uz' },\n    { name: 'Vietnamese', key: 'vi' },\n    { name: 'Welsh', key: 'cy' },\n    { name: 'bantu', key: 'xh' },\n    { name: 'Yiddish', key: 'yi' },\n    { name: 'Yoruba', key: 'yo' },\n    { name: 'zulu', key: 'zu' },\n];\n\nexport default {\n    en,\n    zh,\n    'zh-cn': zh,\n    'zh-tw': zh,\n};\n","import React, {useEffect, useState} from 'react';\nimport styled from 'styled-components';\nimport languages from '../translate/languages';\nimport {t, Translate} from 'react-i18nify';\nimport ReactAudioPlayer from 'react-audio-player';\nimport Sub from \"../subtitle/sub\";\nimport {secondToTime, uuidv4, uploadFile, notify} from '../utils';\nimport md5 from \"md5\";\nimport NProgress from \"nprogress\";\nimport { Button } from 'antd';\n\nNProgress.configure({ showSpinner: true });\n\nconst Tool = styled.div`\n    flex: 1;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    font-size: 13px;\n    background-color: rgb(35 40 64);\n    margin-bottom: 20px;\n    overscroll-behavior: contain;\n    -ms-scroll-chaining: contain;\n    overflow: auto;\n\n    .item {\n        display: flex;\n        align-items: center;\n        padding: 5px 10px;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.4);\n\n        .title {\n            margin-right: 15px;\n        }\n\n        .value {\n            display: flex;\n            align-items: center;\n\n            select {\n                outline: none;\n                margin-right: 15px;\n            }\n\n            button {\n                height: 25px;\n                border: none;\n                padding: 0 10px;\n                margin-right: 15px;\n                outline: none;\n                cursor: pointer;\n                font-size: 12px;\n                color: #fff;\n                border-radius: 3px;\n                background-color: rgb(26, 83, 109);\n                transition: all 0.2s ease;\n                &:hover {\n                    color: #fff;\n                    background-color: #2196f3;\n                }\n                i {\n                    margin-right: 5px;\n                }\n            }\n\n            input[type='checkbox'] {\n                outline: none;\n            }\n\n            input[type='range'] {\n                height: 3px;\n                width: 100px;\n                outline: none;\n                appearance: none;\n                background-color: rgba(255, 255, 255, 0.2);\n            }\n\n            .sub-item {\n                display: flex;\n                margin-right: 15px;\n\n                .sub-title {\n                    display: flex;\n                    align-items: center;\n                    margin-right: 5px;\n                    font-size: 12px;\n                    color: #888;\n                }\n\n                .sub-value {\n                    display: flex;\n                    align-items: center;\n                }\n            }\n        }\n    }\n`;\n\nexport default function ({player, storage, language, options, setOption, translateSubtitles, timeOffsetSubtitles, updateSubtitles}) {\n    const fontSize = storage.get('fontSize') || 20;\n    const bottom = storage.get('bottom') || 40;\n    const color = storage.get('color') || {\n        r: '255',\n        g: '255',\n        b: '255',\n        a: '1',\n    };\n    const [isRecognition, setRecognition] = useState(false);\n\n    async function  auditToText  (blob, type){\n        setRecognition(true);\n        NProgress.start().set(0.5);\n        let fileKey = await uploadFile(blob)\n        let secret = \"fytubjnf\" + \"tyguhjn56\" + \"7uygkjn6\" + \"5f7ygui\";\n        let formdata = new FormData();\n        let requestId = \"web\" + uuidv4();\n        formdata.append(\"fileKey\", fileKey);\n        formdata.append(\"type\", type);\n        formdata.append(\"sign\", md5(secret + requestId + fileKey));\n        formdata.append(\"id\", requestId);\n\n        let res = fetch(\"https://getsubtitle.kxiaofan.com/rest/n/kmovie/audio/recognitionAudioToText\", {\n            method: 'POST',\n            body: formdata,\n        }).then(response => {\n            return response.json();\n        }).then(data => {\n            updateSubtitles(data.text.map(item => new Sub(secondToTime(item.startTime), secondToTime(item.endTime), item.text)));\n        })\n            .catch(error => console.log(error));\n        NProgress.done();\n        setRecognition(false);\n    }\n\n    useEffect(() => {\n        if (player) {\n            const {$subtitle} = player.template;\n            $subtitle.style.fontSize = `${fontSize}px`;\n            $subtitle.style.bottom = `${bottom}px`;\n            $subtitle.style.color = `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`;\n        }\n    }, [bottom, fontSize, player, storage, color]);\n\n\n    return (\n        <Tool>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"speech-recognition\"/>\n                </div>\n                <div className=\"value\">\n                    <Button onClick={() => auditToText(options.audioblob, 1)} loading={isRecognition}>\n                        {isRecognition&&\n                            <Translate value=\"recognition-subtitle-ing\"/>\n                        }\n                        {!isRecognition&&\n                            <Translate value=\"music-recognition\"/>\n                        }\n                    </Button>\n                    <Button onClick={() => auditToText(options.audioblob, 0)} loading={isRecognition}>\n                        {isRecognition&&\n                        <Translate value=\"recognition-subtitle-ing\"/>\n                        }\n                        {!isRecognition&&\n                        <Translate value=\"common-recognition\"/>\n                        }\n                    </Button>\n                    <ReactAudioPlayer style={{height: \"20px\", width: \"220px\"}} src={options.audioblob}\n                                      controls>\n                    </ReactAudioPlayer>\n                </div>\n            </div>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"google-translate\"/>\n                </div>\n                <div className=\"value\">\n                    <select style={{color: \"#000000\"}}\n                            value={options.translationLanguage}\n                            onChange={(event) => setOption({translationLanguage: event.target.value})}\n                    >\n                        {(languages[language] || languages.en).map((item) => (\n                            <option key={item.key} value={item.key}>\n                                {item.name}\n                            </option>\n                        ))}\n                    </select>\n                    <button onClick={() => translateSubtitles()}>\n                        <Translate value=\"confirm\"/>\n                    </button>\n                </div>\n            </div>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"time-offset\"/>\n                </div>\n                <div className=\"value\">\n                    <button onClick={() => timeOffsetSubtitles(-0.1)}>-100ms</button>\n                    <button onClick={() => timeOffsetSubtitles(0.1)}>+100ms</button>\n                    <button onClick={() => timeOffsetSubtitles(-1)}>-1000ms</button>\n                    <button onClick={() => timeOffsetSubtitles(1)}>+1000ms</button>\n                </div>\n            </div>\n        </Tool>\n    );\n}\n","import React, {useEffect, useState} from 'react';\nimport styled from 'styled-components';\nimport {Translate} from 'react-i18nify';\nimport {Radio} from 'antd';\n\nimport reactCSS from 'reactcss';\nimport {ChromePicker} from 'react-color';\nimport Sub from \"../subtitle/sub\";\nimport {secondToTime} from \"../utils\";\n\nclass SketchExample extends React.Component {\n    state = {\n        displayColorPicker: false,\n        color: this.props.color,\n    };\n\n    handleClick = () => {\n        this.setState({displayColorPicker: !this.state.displayColorPicker});\n    };\n\n    handleClose = () => {\n        this.setState({displayColorPicker: false});\n    };\n\n    handleChange = (color) => {\n        this.setState({color: color.rgb});\n        const {$subtitle} = this.props.player.template;\n        $subtitle.style.color = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\n        this.props.storage.set('color', color.rgb);\n    };\n\n    render() {\n        const styles = reactCSS({\n            default: {\n                color: {\n                    width: '30px',\n                    height: '14px',\n                    borderRadius: '2px',\n                    background: `rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`,\n                    border: `1px solid rgba(255, 255, 255, 0.5)`,\n                },\n                swatch: {\n                    borderRadius: '5px',\n                    boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n                    cursor: 'pointer',\n                },\n                popover: {\n                    position: 'absolute',\n                    zIndex: '999',\n                },\n                cover: {\n                    position: 'fixed',\n                    top: '0px',\n                    right: '0px',\n                    bottom: '0px',\n                    left: '0px',\n                },\n            },\n        });\n\n        return (\n            <div>\n                <div style={styles.swatch} onClick={this.handleClick}>\n                    <div style={styles.color}/>\n                </div>\n                {this.state.displayColorPicker ? (\n                    <div style={styles.popover}>\n                        <div style={styles.cover} onClick={this.handleClose}/>\n                        <ChromePicker color={this.state.color} onChange={this.handleChange}/>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n\nconst Template = styled.div`\n    flex: 1;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    font-size: 13px;\n    background-color: rgb(35 40 64);\n    overscroll-behavior: contain;\n    -ms-scroll-chaining: contain;\n    overflow-y: scroll;\n    height: 160px;\n    padding-bottom: 60px;\n\n    .item {\n        display: flex;\n        align-items: center;\n        padding: 5px 10px;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.4);\n\n        .title {\n            margin-right: 15px;\n\n        }\n\n        .value {\n            display: flex;\n            align-items: center;\n\n            select {\n                outline: none;\n                margin-right: 15px;\n            }\n\n            button {\n                height: 25px;\n                border: none;\n                padding: 0 10px;\n                margin-right: 15px;\n                outline: none;\n                cursor: pointer;\n                font-size: 12px;\n                color: #fff;\n                border-radius: 3px;\n                background-color: rgb(26, 83, 109);\n                transition: all 0.2s ease;\n                &:hover {\n                    color: #fff;\n                    background-color: #2196f3;\n                }\n                i {\n                    margin-right: 5px;\n                }\n            }\n\n            input[type='checkbox'] {\n                outline: none;\n            }\n\n            input[type='range'] {\n                height: 3px;\n                width: 100px;\n                outline: none;\n                appearance: none;\n                background-color: rgba(255, 255, 255, 0.2);\n            }\n\n            .sub-item {\n                display: flex;\n                margin-right: 15px;\n\n                .sub-title {\n                    display: flex;\n                    align-items: center;\n                    margin-right: 5px;\n                    font-size: 12px;\n                    color: #888;\n                }\n\n                .sub-value {\n                    display: flex;\n                    align-items: center;\n                }\n            }\n        }\n    }\n`;\n\nexport default function ({player, storage, language, options, setOption, timeOffsetSubtitles}) {\n    const [fontSize, setFontSize] = useState(storage.get('fontSize') || 20);\n    const [bottom, setBottom] = useState(storage.get('bottom') || 40);\n    const [templateList, setTemplateList] = useState([{\n        \"id\": 119,\n        \"coverUrl\": \"https://ali-album.static.yximgs.com/mediacloud/album/album_image/68M7050XIYoFZsbNrN87vhjmP9YYkafnDMMrjAU8zfU.gif?x-oss-process=image/resize,m_fill,w_858,h_496/format,webp\",\n        \"name\": \"\"\n    }]);\n    const [fontList, setFontList] = useState([{\n        \"id\": 100,\n        \"fontname\": \"AaMeirenzhuan (Non-Commercial Use)\",\n        \"coverUrl\": \"https://static.yximgs.com/udata/pkg/KMOVIE-CDN/Snip20201208_62.png\"\n    }]);\n    const color = storage.get('color') || {\n        r: '21',\n        g: '251',\n        b: '186',\n        a: '1',\n    };\n\n    const onChangeSize = (value) => {\n        const {$subtitle} = player.template;\n        $subtitle.style.fontSize = `${value}px`;\n        storage.set('fontSize', value);\n        setFontSize(value);\n    };\n\n    const onChangeBottom = (value) => {\n        const {$subtitle} = player.template;\n        $subtitle.style.bottom = `${value}px`;\n        storage.set('bottom', value);\n        setBottom(value);\n    };\n\n    function getFontList(){\n        let res = fetch(\"https://getsubtitle.kxiaofan.com/rest/n/kmovie/app/effect/subtitle/getFontList\", {\n            method: 'GET',\n        }).then(response => {\n            return response.json();\n        }).then(data => {\n            setFontList(data.list);\n        })\n            .catch(error => console.log(error));\n    }\n\n    function getTemplateList(){\n        let res = fetch(\"https://getsubtitle.kxiaofan.com/rest/n/kmovie/app/effect/subtitle/getTemplateList\", {\n            method: 'GET',\n        }).then(response => {\n            return response.json();\n        }).then(data => {\n            setTemplateList(data.list);\n        })\n            .catch(error => console.log(error));\n    }\n\n    useEffect(() => {\n        if (player) {\n            const {$subtitle} = player.template;\n            $subtitle.style.fontSize = `${fontSize}px`;\n            $subtitle.style.bottom = `${bottom}px`;\n            $subtitle.style.color = `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`;\n        }\n\n    }, [bottom, fontSize, player, storage, color]);\n\n    useEffect(() => {\n        getTemplateList();\n        getFontList();\n    },[])\n\n\n    return (\n        <Template>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"subtitle-style\"/>\n                </div>\n                <div className=\"value\">\n                    <div className=\"sub-item\">\n                        <div className=\"sub-title\">\n                            <Translate value=\"subtitle-color\"/>\n                        </div>\n                        <div className=\"sub-value\">\n                            <SketchExample storage={storage} player={player} color={color}/>\n                        </div>\n                    </div>\n                    <div className=\"sub-item\">\n                        <div className=\"sub-title\">\n                            <Translate value=\"subtitle-size\"/>\n                        </div>\n                        <div className=\"sub-value\">\n                            <input\n                                defaultValue={fontSize}\n                                type=\"range\"\n                                min=\"10\"\n                                max=\"80\"\n                                step=\"1\"\n                                onChange={(event) => {\n                                    onChangeSize(event.target.value);\n                                }}\n                            />\n                            |{fontSize}px\n                        </div>\n                    </div>\n                    <div className=\"sub-item\">\n                        <div className=\"sub-title\">\n                            <Translate value=\"subtitle-bottom\"/>\n                        </div>\n                        <div className=\"sub-value\">\n                            <input\n                                defaultValue={bottom}\n                                type=\"range\"\n                                min=\"0\"\n                                max=\"400\"\n                                step=\"1\"\n                                onChange={(event) => {\n                                    onChangeBottom(event.target.value);\n                                }}\n                            />\n                            |{bottom}px\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"item\">\n                <div className=\"title\" style={{width: \"60px\"}}>\n                    <Translate value=\"subtitle-template\"/>\n                </div>\n                <div className=\"value\">\n                    <Radio.Group name=\"template-group\" onChange={(e) => {\n                        setOption({templateId: e.target.value})\n                    }} defaultValue={() => {\n                        setOption({templateId: templateList[0].id});\n                        return templateList[0].id;\n                    }}>\n                        {\n                            templateList.map(item => (\n                                <Radio.Button value={item.id} key={item.id} style={{\n                                    width: \"108px\",\n                                    height: \"52px\",\n                                    padding: \" 0 0px\",\n                                    margin: \"0 1.5px\",\n                                    marginBottom: \"3px\",\n                                    background: \"#999999\"\n                                }}>\n                                    <img width=\"106px\" height=\"50px\" key={item.id} src={item.coverUrl}/>\n                                </Radio.Button>\n                            ))\n                        }\n                    </Radio.Group>\n                </div>\n            </div>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"subtitle-font\"/>\n                </div>\n                <div className=\"value\">\n                    <Radio.Group name=\"font-group\" onChange={(e) => {\n                        setOption({fontId: e.target.value})\n                    }} defaultValue={() => {\n                        setOption({fontId: fontList[0].id});\n                        return fontList[0].id;\n                    }}>\n                        {\n                            fontList.map(item => (\n                                <Radio.Button value={item.id} key={item.id} style={{\n                                    width: \"108px\",\n                                    height: \"52px\",\n                                    padding: \" 0 0px\",\n                                    margin: \"0 1.5px\"\n                                }}>\n                                    <img width=\"106px\" height=\"50px\" key={item.id} src={item.coverUrl}/>\n                                </Radio.Button>\n                            ))\n                        }\n                    </Radio.Group>\n                </div>\n            </div>\n        </Template>\n    );\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Table } from 'react-virtualized';\nimport debounce from 'lodash/debounce';\nimport unescape from 'lodash/unescape';\nimport clamp from 'lodash/clamp';\nimport { timeToSecond, secondToTime } from '../utils';\n\nconst Subtitle = styled.div`\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n        .ReactVirtualized__Table__row {\n            transition: all 0.2s ease;\n            &.odd {\n                background-color: rgb(35, 40, 64);\n            }\n            &.highlight {\n                background-color: #2196f3;\n            }\n            &.illegal {\n                background-color: #c75123;\n            }\n            .row {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                flex-direction: column;\n                color: #fff;\n                height: 100%;\n                padding: 10px 5px;\n                border-bottom: 1px solid #000;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            width: 100%;\n            color: #fff;\n            font-size: 12px;\n            text-align: center;\n            background-color: rgba(0, 0, 0, 0.4);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            resize: none;\n            outline: none;\n        }\n\n        .input {\n            height: 25px;\n            line-height: 25px;\n            cursor: col-resize;\n            user-select: none;\n        }\n\n        .textarea {\n            padding: 5px;\n            height: 100%;\n            line-height: 1.5;\n        }\n\n        .operation {\n            i {\n                font-size: 12px;\n                cursor: pointer;\n            }\n        }\n    }\n`;\n\nexport default function({\n    player,\n    subtitles,\n    addSubtitle,\n    currentIndex,\n    updateSubtitle,\n    removeSubtitle,\n    translateSubtitle,\n    checkSubtitle,\n}) {\n    let isDroging = false;\n    let lastPageX = 0;\n    let lastSub = null;\n    let lastKey = '';\n    let lastValue = '';\n\n    function onMouseDown(event, sub, key) {\n        isDroging = true;\n        lastPageX = event.pageX;\n        lastSub = sub;\n        lastKey = key;\n    }\n\n    function onMouseMove(event, sub, key) {\n        if (isDroging) {\n            const time = Number(((event.pageX - lastPageX) / 10).toFixed(3));\n            lastValue = secondToTime(clamp(timeToSecond(sub[key]) + time, 0, Infinity));\n        }\n    }\n\n    function onMouseUp() {\n        if (isDroging) {\n            if (lastSub && lastKey && lastValue) {\n                updateSubtitle(lastSub, lastKey, lastValue);\n            }\n            isDroging = false;\n            lastPageX = 0;\n            lastSub = null;\n            lastKey = '';\n            lastValue = '';\n        }\n    }\n\n    const [width, setWidth] = useState(100);\n    const [height, setHeight] = useState(100);\n\n    const resize = useCallback(() => {\n        setWidth(document.body.clientWidth / 2);\n        setHeight(document.body.clientHeight - 210);\n    }, [setWidth, setHeight]);\n\n    useEffect(() => {\n        resize();\n        if (!resize.init) {\n            resize.init = true;\n            const debounceResize = debounce(resize, 500);\n            window.addEventListener('resize', debounceResize);\n        }\n    }, [resize]);\n\n    return (\n        <Subtitle>\n            <Table\n                headerHeight={40}\n                width={width}\n                height={height}\n                rowHeight={80}\n                scrollToIndex={currentIndex}\n                rowCount={subtitles.length}\n                rowGetter={({ index }) => subtitles[index]}\n                headerRowRenderer={() => null}\n                rowRenderer={props => {\n                    return (\n                        <div\n                            key={props.key}\n                            className={[\n                                props.className,\n                                props.index % 2 ? 'odd' : '',\n                                currentIndex === props.index ? 'highlight' : '',\n                                checkSubtitle(props.rowData) ? 'illegal' : '',\n                            ]\n                                .join(' ')\n                                .trim()}\n                            style={props.style}\n                            onClick={() => {\n                                player.pause = true;\n                                if (player.duration >= props.rowData.startTime) {\n                                    player.loop = [];\n                                    player.seek = props.rowData.startTime + 0.001;\n                                }\n                            }}\n                        >\n                            <div className=\"row operation\" style={{ width: 30 }}>\n                                <i\n                                    className=\"icon-trash-empty\"\n                                    onClick={() => removeSubtitle(props.rowData)}\n                                    style={{ marginBottom: 5 }}\n                                ></i>\n                                {/*<i*/}\n                                {/*    className=\"icon-language\"*/}\n                                {/*    onClick={() => translateSubtitle(props.rowData)}*/}\n                                {/*    style={{ marginBottom: 5 }}*/}\n                                {/*></i>*/}\n                                <i className=\"icon-plus\" onClick={() => addSubtitle(props.index + 1)}></i>\n                            </div>\n                            <div className=\"row time\" style={{ width: 150 }} onMouseUp={onMouseUp}>\n                                <div\n                                    className=\"input\"\n                                    onMouseDown={event => onMouseDown(event, props.rowData, 'start')}\n                                    onMouseMove={event => onMouseMove(event, props.rowData, 'start')}\n                                    style={{ marginBottom: 10 }}\n                                >\n                                    {props.rowData.start}\n                                </div>\n                                <div\n                                    className=\"input\"\n                                    onMouseDown={event => onMouseDown(event, props.rowData, 'end')}\n                                    onMouseMove={event => onMouseMove(event, props.rowData, 'end')}\n                                >\n                                    {props.rowData.end}\n                                </div>\n                            </div>\n                            <div className=\"row duration\" style={{ width: 70 }}>\n                                {props.rowData.duration}\n                            </div>\n                            <div className=\"row text\" style={{ flex: 1 }}>\n                                <textarea\n                                    maxLength={200}\n                                    spellCheck={false}\n                                    className=\"textarea\"\n                                    value={unescape(props.rowData.text)}\n                                    onChange={event => updateSubtitle(props.rowData, 'text', event.target.value)}\n                                />\n                            </div>\n                        </div>\n                    );\n                }}\n            ></Table>\n        </Subtitle>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport Player from './Player';\nimport Tool from './Tool';\nimport Template from './Template';\nimport Subtitle from './Subtitle';\nimport { Tabs } from 'antd';\nimport 'antd/dist/antd.css';\n\nconst { TabPane } = Tabs;\n\nconst Main = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n    border-bottom: 1px solid #000;\n`;\n\nconst Left = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    width: 50%;\n    border-right: 1px solid #000;\n`;\n\nconst Right = styled.div`\n    display: flex;\n    height: 100%;\n    flex: 1;\n`;\n\nexport default function(props) {\n    return (\n        <Main>\n            <Left>\n                <Player {...props} />\n                <Tabs defaultActiveKey=\"1\" style={{width: \"90%\",color: \"#ffffff\"}}>\n                    <TabPane tab=\"\" key=\"1\">\n                        <Tool {...props} />\n                    </TabPane>\n                    <TabPane tab=\"\" key=\"2\">\n                        <Template {...props} />\n                    </TabPane>\n                </Tabs>\n\n            </Left>\n            <Right>\n                <Subtitle {...props} />\n            </Right>\n        </Main>\n    );\n}\n","export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({ fn, ctx });\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","export default class Events {\n    constructor() {\n        this.destroyEvents = [];\n        this.proxy = this.proxy.bind(this);\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (Array.isArray(name)) {\n            name.forEach(item => this.proxy(target, item, callback, option));\n        } else {\n            target.addEventListener(name, callback, option);\n            this.destroyEvents.push(() => {\n                target.removeEventListener(name, callback, option);\n            });\n        }\n    }\n\n    destroy() {\n        this.destroyEvents.forEach(event => event());\n    }\n}\n","import DT from 'duration-time-conversion';\n\nexport class WFPlayerError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'WFPlayerError';\n    }\n}\n\nexport function errorHandle(condition, msg) {\n    if (!condition) {\n        throw new WFPlayerError(msg);\n    }\n    return condition;\n}\n\nexport function durationToTime(duration = 0) {\n    return DT.d2t(duration.toFixed(3));\n}\n\nexport function timeToDuration(time) {\n    return DT.t2d(time);\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        const merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}","import { errorHandle } from './utils';\n\nexport default class Template {\n    constructor(wf) {\n        this.wf = wf;\n        this.canvas = null;\n        this.update();\n    }\n\n    update() {\n        const { container, pixelRatio } = this.wf.options;\n        const { clientWidth, clientHeight } = container;\n        if (this.canvas) {\n            this.canvas.width = clientWidth * pixelRatio;\n            this.canvas.height = clientHeight * pixelRatio;\n        } else {\n            errorHandle(\n                this.wf.constructor.instances.every(wf => wf.options.container !== container),\n                'Cannot mount multiple instances on the same dom element, please destroy the previous instance first.',\n            );\n            errorHandle(clientWidth && clientHeight, 'The width and height of the container cannot be 0');\n            container.innerHTML = '';\n            this.canvas = document.createElement('canvas');\n            this.canvas.width = clientWidth * pixelRatio;\n            this.canvas.height = clientHeight * pixelRatio;\n            this.canvas.style.width = '100%';\n            this.canvas.style.height = '100%';\n            container.appendChild(this.canvas);\n        }\n    }\n\n    exportImage() {\n        const elink = document.createElement('a');\n        elink.style.display = 'none';\n        elink.href = this.canvas.toDataURL('image/png');\n        elink.download = `${Date.now()}.png`;\n        document.body.appendChild(elink);\n        elink.click();\n        document.body.removeChild(elink);\n    }\n\n    destroy() {\n        this.wf.options.container.innerHTML = '';\n    }\n}\n","import { durationToTime, clamp } from './utils';\n\nexport default class Drawer {\n    constructor(wf) {\n        this.wf = wf;\n        this.canvas = wf.template.canvas;\n        this.ctx = this.canvas.getContext('2d');\n        this.gridNum = 0;\n        this.gridGap = 0;\n        this.beginTime = 0;\n\n        this.update();\n\n        wf.on('options', () => {\n            this.update();\n        });\n\n        wf.on('channelData', () => {\n            this.update();\n        });\n    }\n\n    update() {\n        const {\n            currentTime,\n            options: { cursor, grid, ruler, wave, duration, padding },\n        } = this.wf;\n        this.gridNum = duration * 10 + padding * 2;\n        this.gridGap = this.canvas.width / this.gridNum;\n        this.beginTime = Math.floor(currentTime / duration) * duration;\n\n        this.wf.emit('render', {\n            padding,\n            duration,\n            gridGap: this.gridGap,\n            gridNum: this.gridNum,\n            beginTime: this.beginTime,\n        });\n\n        this.drawBackground();\n        if (grid) {\n            this.drawGrid();\n        }\n        if (ruler) {\n            this.drawRuler();\n        }\n        if (wave) {\n            this.drawWave();\n        }\n        if (cursor) {\n            this.drawCursor();\n        }\n    }\n\n    drawBackground() {\n        const { backgroundColor, paddingColor, padding } = this.wf.options;\n        const { width, height } = this.canvas;\n        this.ctx.clearRect(0, 0, width, height);\n        this.ctx.fillStyle = backgroundColor;\n        this.ctx.fillRect(0, 0, width, height);\n        this.ctx.fillStyle = paddingColor;\n        this.ctx.fillRect(0, 0, padding * this.gridGap, height);\n        this.ctx.fillRect(width - padding * this.gridGap, 0, padding * this.gridGap, height);\n    }\n\n    drawWave() {\n        const {\n            currentTime,\n            options: { progress, waveColor, progressColor, duration, padding, waveScale },\n            decoder: {\n                channelData,\n                audiobuffer: { sampleRate },\n            },\n        } = this.wf;\n        const { width, height } = this.canvas;\n        const middle = height / 2;\n        const waveWidth = width - this.gridGap * padding * 2;\n        const startIndex = clamp(this.beginTime * sampleRate, 0, Infinity);\n        const endIndex = clamp((this.beginTime + duration) * sampleRate, startIndex, Infinity);\n        const step = Math.floor((endIndex - startIndex) / waveWidth);\n        const cursorX = padding * this.gridGap + (currentTime - this.beginTime) * this.gridGap * 10;\n\n        let stepIndex = 0;\n        let xIndex = 0;\n        let min = 1;\n        let max = -1;\n        for (let i = startIndex; i < endIndex; i += 1) {\n            stepIndex += 1;\n            const item = channelData[i] || 0;\n            if (item < min) {\n                min = item;\n            } else if (item > max) {\n                max = item;\n            }\n            if (stepIndex >= step && xIndex < waveWidth) {\n                xIndex += 1;\n                const waveX = this.gridGap * padding + xIndex;\n                this.ctx.fillStyle = progress && cursorX >= waveX ? progressColor : waveColor;\n                this.ctx.fillRect(\n                    waveX,\n                    (1 + min * waveScale) * middle,\n                    1,\n                    Math.max(1, (max - min) * middle * waveScale),\n                );\n                stepIndex = 0;\n                min = 1;\n                max = -1;\n            }\n        }\n    }\n\n    drawGrid() {\n        const { gridColor, pixelRatio } = this.wf.options;\n        const { width, height } = this.canvas;\n        this.ctx.fillStyle = gridColor;\n        for (let index = 0; index < this.gridNum; index += 1) {\n            this.ctx.fillRect(this.gridGap * index, 0, pixelRatio, height);\n        }\n        for (let index = 0; index < height / this.gridGap; index += 1) {\n            this.ctx.fillRect(0, this.gridGap * index, width, pixelRatio);\n        }\n    }\n\n    drawRuler() {\n        const { rulerColor, pixelRatio, padding, rulerAtTop } = this.wf.options;\n        const { height } = this.canvas;\n        const fontSize = 11;\n        const fontHeight = 15;\n        const fontTop = 30;\n        this.ctx.font = `${fontSize * pixelRatio}px Arial`;\n        this.ctx.fillStyle = rulerColor;\n        let second = -1;\n        for (let index = 0; index < this.gridNum; index += 1) {\n            if (index && index >= padding && index <= this.gridNum - padding && (index - padding) % 10 === 0) {\n                second += 1;\n                this.ctx.fillRect(\n                    this.gridGap * index,\n                    rulerAtTop ? 0 : height - fontHeight * pixelRatio,\n                    pixelRatio,\n                    fontHeight * pixelRatio,\n                );\n                this.ctx.fillText(\n                    durationToTime(this.beginTime + second).split('.')[0],\n                    this.gridGap * index - fontSize * pixelRatio * 2 + pixelRatio,\n                    rulerAtTop ? fontTop * pixelRatio : height - fontTop * pixelRatio + fontSize,\n                );\n            } else if (index && (index - padding) % 5 === 0) {\n                this.ctx.fillRect(\n                    this.gridGap * index,\n                    rulerAtTop ? 0 : height - (fontHeight / 2) * pixelRatio,\n                    pixelRatio,\n                    (fontHeight / 2) * pixelRatio,\n                );\n            }\n        }\n    }\n\n    drawCursor() {\n        const {\n            currentTime,\n            options: { cursorColor, pixelRatio, padding },\n        } = this.wf;\n        const { height } = this.canvas;\n        this.ctx.fillStyle = cursorColor;\n        this.ctx.fillRect(\n            padding * this.gridGap + (currentTime - this.beginTime) * this.gridGap * 10,\n            0,\n            pixelRatio,\n            height,\n        );\n    }\n}\n","import throttle from 'lodash/throttle';\nimport toWav  from 'audiobuffer-to-wav';\n\nexport default class Decoder {\n    constructor(wf) {\n        this.wf = wf;\n        this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n        this.throttleDecodeAudioData = throttle(this.decodeAudioData, 1000);\n        this.audiobuffer = this.audioCtx.createBuffer(2, 22050, 44100);\n        this.channelData = new Float32Array();\n\n        this.wf.on('loading', (uint8) => {\n            this.throttleDecodeAudioData(uint8);\n        });\n\n    }\n\n    decodeAudioData(uint8) {\n        const {\n            options: { channel },\n        } = this.wf;\n        this.audioCtx.decodeAudioData(\n            uint8.buffer,\n            (audiobuffer) => {\n                this.audiobuffer = audiobuffer;\n                this.wf.emit('audiobuffer', this.audiobuffer);\n                this.wf.emit('decodeing', this.audiobuffer.duration / this.wf.duration);\n                this.channelData = audiobuffer.getChannelData(channel);\n                this.wf.emit('channelData', this.channelData);\n                this.audiowav = toWav(this.audiobuffer);\n                this.audioblob = new Blob([this.audiowav], {type: \"audio/wav\"})\n                this.wf.emit('audioblob', URL.createObjectURL(this.audioblob));\n            },\n            (error) => {\n                console.warn(`It seems that the AudioContext decoding get wrong: ${error.message.trim()}`);\n            },\n        );\n    }\n\n    changeChannel(channel) {\n        this.channelData = this.audiobuffer.getChannelData(channel);\n        this.wf.emit('channelData', this.channelData);\n    }\n\n    destroy() {\n        this.audiobuffer = this.audioCtx.createBuffer(2, 22050, 44100);\n        this.channelData = new Float32Array();\n    }\n}\n","import { mergeBuffer } from './utils';\n\nexport default class Loader {\n    constructor(wf) {\n        this.wf = wf;\n        this.fileSize = 0;\n        this.loadSize = 0;\n        this.data = new Uint8Array();\n        this.reader = null;\n        this.abortController = null;\n    }\n\n    load(url) {\n        this.destroy();\n        this.abortController = new AbortController();\n        const { withCredentials, cors, headers } = this.wf.options;\n        this.wf.emit('loadStart');\n        return fetch(url, {\n            credentials: withCredentials ? 'include' : 'omit',\n            mode: cors ? 'cors' : 'no-cors',\n            signal: this.abortController.signal,\n            headers,\n        })\n            .then(response => {\n                if (response.body && typeof response.body.getReader === 'function') {\n                    this.fileSize = Number(response.headers.get('content-length'));\n                    this.wf.emit('fileSize', this.fileSize);\n                    this.reader = response.body.getReader();\n                    return function read() {\n                        return this.reader.read().then(({ done, value }) => {\n                            if (done) {\n                                this.wf.emit('loadEnd');\n                                return null;\n                            }\n                            this.loadSize += value.byteLength;\n                            this.wf.emit('downloading', this.loadSize / this.fileSize);\n                            this.data = mergeBuffer(this.data, value);\n                            this.wf.emit('loading', this.data.slice());\n                            return read.call(this);\n                        });\n                    }.call(this);\n                }\n                return response.arrayBuffer();\n            })\n            .then(arrayBuffer => {\n                if (arrayBuffer && arrayBuffer.byteLength) {\n                    const uint8 = new Uint8Array(arrayBuffer);\n                    this.fileSize = uint8.byteLength;\n                    this.wf.emit('fileSize', this.fileSize);\n                    this.loadSize = uint8.byteLength;\n                    this.wf.emit('downloading', this.loadSize / this.fileSize);\n                    this.wf.emit('loading', uint8);\n                    this.wf.emit('loadEnd');\n                }\n            });\n    }\n\n    destroy() {\n        this.fileSize = 0;\n        this.loadSize = 0;\n        this.data = new Uint8Array();\n        if (this.reader) {\n            this.reader.cancel();\n            this.reader = null;\n        }\n        if (this.abortController) {\n            this.abortController.abort();\n            this.abortController = null;\n        }\n    }\n}\n","import throttle from 'lodash/throttle';\nimport { clamp } from './utils';\n\nexport default class Controller {\n    constructor(wf) {\n        this.wf = wf;\n        this.playTimer = null;\n        this.wf.on('load', () => {\n            this.clickInit();\n            this.resizeInit();\n            this.playInit();\n        });\n    }\n\n    getTimeFromEvent(event) {\n        const {\n            currentTime,\n            template: { canvas },\n            options: { duration, padding, container, pixelRatio },\n        } = this.wf;\n        const gridNum = duration * 10 + padding * 2;\n        const gridGap = canvas.width / gridNum;\n        const left = clamp(event.pageX - container.offsetLeft - (padding * gridGap) / pixelRatio, 0, Infinity);\n        const beginTime = Math.floor(currentTime / duration) * duration;\n        const time = clamp(((left / gridGap) * pixelRatio) / 10 + beginTime, beginTime, beginTime + duration);\n        return time;\n    }\n\n    clickInit() {\n        const {\n            template: { canvas },\n            events: { proxy },\n            options: { mediaElement },\n        } = this.wf;\n        proxy(canvas, ['click', 'contextmenu'], event => {\n            const time = this.getTimeFromEvent(event);\n            this.wf.emit(event.type, time, event);\n            if (mediaElement && mediaElement.currentTime !== time) {\n                mediaElement.currentTime = time;\n            }\n            this.wf.drawer.update();\n        });\n    }\n\n    resizeInit() {\n        const {\n            template,\n            drawer,\n            events: { proxy },\n        } = this.wf;\n\n        const throttleResize = throttle(() => {\n            template.update();\n            drawer.update();\n            this.wf.emit('resize');\n        }, 500);\n\n        proxy(window, ['resize', 'orientationchange'], () => {\n            throttleResize();\n        });\n    }\n\n    playInit() {\n        const {\n            drawer,\n            events: { proxy },\n            options: { mediaElement },\n        } = this.wf;\n        if (!mediaElement) return;\n\n        proxy(mediaElement, 'seeked', () => {\n            drawer.update();\n        });\n\n        (function loop() {\n            this.playTimer = requestAnimationFrame(() => {\n                if (this.wf.playing) {\n                    drawer.update();\n                    this.wf.emit('playing', mediaElement.currentTime);\n                }\n\n                if (!this.wf.isDestroy) {\n                    loop.call(this);\n                }\n            });\n        }.call(this));\n    }\n\n    destroy() {\n        cancelAnimationFrame(this.playTimer);\n    }\n}\n","import validator from 'option-validator';\nimport Emitter from './emitter';\nimport Events from './events';\nimport Template from './template';\nimport Drawer from './drawer';\nimport Decoder from './decoder';\nimport Loader from './loader';\nimport Controller from './controller';\nimport { timeToDuration, clamp, errorHandle } from './utils';\n\nlet id = 0;\nconst instances = [];\nexport default class WFPlayer extends Emitter {\n    static get instances() {\n        return instances;\n    }\n\n    static get version() {\n        return '__VERSION__';\n    }\n\n    static get env() {\n        return '__ENV__';\n    }\n\n    static get default() {\n        return {\n            container: '#waveform',\n            mediaElement: null,\n            wave: true,\n            waveColor: 'rgba(255, 255, 255, 0.1)',\n            backgroundColor: 'rgb(28, 32, 34)',\n            paddingColor: 'rgba(255, 255, 255, 0.05)',\n            cursor: true,\n            cursorColor: '#ff0000',\n            progress: true,\n            progressColor: 'rgba(255, 255, 255, 0.5)',\n            grid: true,\n            gridColor: 'rgba(255, 255, 255, 0.05)',\n            ruler: true,\n            rulerColor: 'rgba(255, 255, 255, 0.5)',\n            rulerAtTop: true,\n            withCredentials: false,\n            cors: false,\n            headers: {},\n            channel: 0,\n            duration: 10,\n            padding: 5,\n            waveScale: 0.8,\n            pixelRatio: window.devicePixelRatio,\n        };\n    }\n\n    static get scheme() {\n        const checkNum = (name, min, max, isInteger) => (value, type) => {\n            errorHandle(type === 'number', `${name} expects to receive number as a parameter, but got ${type}.`);\n            errorHandle(\n                value >= min && value <= max && (isInteger ? Number.isInteger(value) : true),\n                `'options.${name}' expect ${\n                    isInteger ? 'an integer ' : 'a '\n                }number that >= ${min} and <= ${max}, but got ${value}.`,\n            );\n            return true;\n        };\n\n        return {\n            container: 'htmlelement|htmldivelement',\n            mediaElement: 'null|htmlvideoelement|htmlaudioelement',\n            wave: 'boolean',\n            waveColor: 'string',\n            backgroundColor: 'string',\n            paddingColor: 'string',\n            cursor: 'boolean',\n            cursorColor: 'string',\n            progress: 'boolean',\n            progressColor: 'string',\n            grid: 'boolean',\n            gridColor: 'string',\n            ruler: 'boolean',\n            rulerColor: 'string',\n            rulerAtTop: 'boolean',\n            withCredentials: 'boolean',\n            cors: 'boolean',\n            headers: 'object',\n            channel: checkNum('channel', 0, 5, true),\n            duration: checkNum('duration', 1, 100, true),\n            padding: checkNum('padding', 1, 100, true),\n            waveScale: checkNum('waveScale', 0.1, 10, false),\n            pixelRatio: checkNum('pixelRatio', 1, 10, false),\n        };\n    }\n\n    constructor(options = {}) {\n        super();\n\n        this._currentTime = 0;\n        this.isDestroy = false;\n        this.options = {};\n        this.setOptions(options);\n\n        this.events = new Events(this);\n        this.template = new Template(this);\n        this.decoder = new Decoder(this);\n        this.drawer = new Drawer(this);\n        this.controller = new Controller(this);\n        this.loader = new Loader(this);\n\n        id += 1;\n        this.id = id;\n        instances.push(this);\n    }\n\n    get currentTime() {\n        return this.options.mediaElement ? this.options.mediaElement.currentTime : this._currentTime;\n    }\n\n    get duration() {\n        return this.options.mediaElement ? this.options.mediaElement.duration : timeToDuration('99:59:59.999');\n    }\n\n    get playing() {\n        const { mediaElement } = this.options;\n        if (mediaElement) {\n            return !!(\n                mediaElement.currentTime > 0 &&\n                !mediaElement.paused &&\n                !mediaElement.ended &&\n                mediaElement.readyState > 2\n            );\n        }\n        return false;\n    }\n\n    setOptions(options = {}) {\n        errorHandle(validator.kindOf(options) === 'object', 'setOptions expects to receive object as a parameter.');\n\n        if (typeof options.container === 'string') {\n            options.container = document.querySelector(options.container);\n        }\n\n        if (typeof options.mediaElement === 'string') {\n            options.mediaElement = document.querySelector(options.mediaElement);\n        }\n\n        this.options = validator(\n            {\n                ...WFPlayer.default,\n                ...this.options,\n                ...options,\n            },\n            WFPlayer.scheme,\n        );\n\n        this.emit('options', this.options);\n        return this;\n    }\n\n    load(target) {\n        if (target instanceof HTMLVideoElement || target instanceof HTMLAudioElement) {\n            this.options.mediaElement = target;\n            target = target.src;\n        }\n        errorHandle(\n            typeof target === 'string' && target.trim(),\n            `The load target is not a string. If you are loading a mediaElement, make sure the mediaElement.src is not empty.`,\n        );\n        this.loader.load(target);\n        this.emit('load');\n        return this;\n    }\n\n    seek(second) {\n        errorHandle(typeof second === 'number', 'seek expects to receive number as a parameter.');\n        this._currentTime = clamp(second, 0, this.duration);\n        if (this.options.mediaElement && this.options.mediaElement.currentTime !== this._currentTime) {\n            this.options.mediaElement.currentTime = this._currentTime;\n        }\n        this.drawer.update();\n        return this;\n    }\n\n    changeChannel(channel) {\n        this.setOptions({ channel });\n        this.decoder.changeChannel(channel);\n    }\n\n    exportImage() {\n        this.template.exportImage();\n        return this;\n    }\n\n    destroy() {\n        this.isDestroy = true;\n        this.events.destroy();\n        this.template.destroy();\n        this.controller.destroy();\n        this.decoder.destroy();\n        this.loader.destroy();\n        instances.splice(instances.indexOf(this), 1);\n    }\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport isEqual from 'lodash/isEqual';\nimport { notify, secondToTime, getKeyCode } from '../utils';\nimport { t, Translate } from 'react-i18nify';\n\nconst Block = styled.div`\n    position: absolute;\n    z-index: 9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n\n    .contextmenu {\n        position: absolute;\n        z-index: 4;\n        left: 0;\n        top: 0;\n        pointer-events: all;\n\n        .contextmenu-item {\n            height: 30px;\n            padding: 0 10px;\n            line-height: 30px;\n            cursor: pointer;\n            font-size: 12px;\n            color: #ccc;\n            user-select: none;\n            background-color: rgba(0, 0, 0, 0.75);\n            transition: all 0.2s ease;\n            &:hover {\n                color: #fff;\n                background-color: #2196f3;\n            }\n        }\n    }\n\n    .sub-item {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        color: #fff;\n        font-size: 13px;\n        cursor: move;\n        user-select: none;\n        pointer-events: all;\n        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n        background-color: rgba(255, 255, 255, 0.2);\n        border-left: 1px solid rgba(255, 255, 255, 0.2);\n        border-right: 1px solid rgba(255, 255, 255, 0.2);\n\n        &:hover {\n            background-color: rgba(255, 255, 255, 0.3);\n        }\n\n        &.sub-highlight {\n            background-color: rgba(33, 150, 243, 0.5);\n            border-left: 1px solid rgba(33, 150, 243, 0.5);\n            border-right: 1px solid rgba(33, 150, 243, 0.5);\n        }\n\n        &.sub-illegal {\n            background-color: rgba(199, 81, 35, 0.5);\n        }\n\n        .sub-handle {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            height: 100%;\n            cursor: col-resize;\n            user-select: none;\n            &:hover {\n                background-color: rgba(255, 255, 255, 0.1);\n            }\n        }\n\n        .sub-text {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-direction: column;\n            word-break: break-all;\n            width: 100%;\n            height: 100%;\n            padding: 0 20px;\n            p {\n                margin: 5px 0;\n                line-height: 1;\n            }\n        }\n    }\n`;\n\nfunction getCurrentSubs(subs, beginTime, duration) {\n    return subs.filter((item) => {\n        return (\n            (item.startTime >= beginTime && item.startTime <= beginTime + duration) ||\n            (item.endTime >= beginTime && item.endTime <= beginTime + duration) ||\n            (item.startTime < beginTime && item.endTime > beginTime + duration)\n        );\n    });\n}\n\nfunction magnetically(time, closeTime) {\n    if (!closeTime) return time;\n    if (time > closeTime - 0.1 && closeTime + 0.1 > time) {\n        return closeTime;\n    }\n    return time;\n}\n\nlet lastTarget = null;\nlet lastSub = null;\nlet lastType = '';\nlet lastX = 0;\nlet lastIndex = -1;\nlet lastWidth = 0;\nlet lastDiffX = 0;\nlet isDroging = false;\n\nexport default React.memo(\n    function ({\n        player,\n        subtitles,\n        render,\n        autoAlign,\n        loopPlayback,\n        currentTime,\n        checkSubtitle,\n        removeSubtitle,\n        addSubtitle,\n        hasSubtitle,\n        mergeSubtitle,\n        updateSubtitle,\n    }) {\n        const [contextMenu, setContextMenu] = useState(false);\n        const [contextMenuX, setContextMenuX] = useState(0);\n        const [contextMenuY, setContextMenuY] = useState(0);\n\n        const $blockRef = React.createRef();\n        const $contextMenuRef = React.createRef();\n        const $subsRef = React.createRef();\n        const currentSubs = getCurrentSubs(subtitles, render.beginTime, render.duration);\n        const gridGap = document.body.clientWidth / render.gridNum;\n        const currentIndex = currentSubs.findIndex(\n            (item) => item.startTime <= currentTime && item.endTime > currentTime,\n        );\n\n        const onContextMenu = (sub, event) => {\n            lastSub = sub;\n            event.preventDefault();\n            const $subs = event.target;\n            const subsTop = $subs.getBoundingClientRect().top;\n            const $contextMenu = $contextMenuRef.current;\n            const top =\n                event.pageY + $contextMenu.clientHeight > document.body.clientHeight\n                    ? document.body.clientHeight - $contextMenu.clientHeight - subsTop\n                    : event.pageY - subsTop;\n            const left =\n                event.pageX + $contextMenu.clientWidth > document.body.clientWidth\n                    ? document.body.clientWidth - $contextMenu.clientWidth\n                    : event.pageX;\n            setContextMenuX(left);\n            setContextMenuY(top);\n            setContextMenu(true);\n        };\n\n        const onDocumentClick = useCallback(\n            (event) => {\n                if (event.composedPath) {\n                    const composedPath = event.composedPath() || [];\n                    if (composedPath.includes($contextMenuRef.current)) {\n                        setContextMenu(false);\n                    }\n                }\n            },\n            [$contextMenuRef, setContextMenu],\n        );\n\n        const onMouseDown = (sub, event, type) => {\n            isDroging = true;\n            lastSub = sub;\n            lastType = type;\n            lastX = event.pageX;\n            lastIndex = currentSubs.indexOf(sub);\n            lastTarget = $subsRef.current.children[lastIndex];\n            lastWidth = parseFloat(lastTarget.style.width);\n        };\n\n        const onDoubleClick = (sub, event) => {\n            const $subs = event.currentTarget;\n            const index = hasSubtitle(sub);\n            const previou = subtitles[index - 1];\n            const next = subtitles[index + 1];\n            if (previou && next) {\n                const width = (next.startTime - previou.endTime) * 10 * gridGap;\n                $subs.style.width = `${width}px`;\n                const start = secondToTime(previou.endTime);\n                const end = secondToTime(next.startTime);\n                updateSubtitle(sub, {\n                    start,\n                    end,\n                });\n                player.loop = loopPlayback ? [previou.endTime, next.startTime] : [];\n                player.seek = previou.endTime;\n            }\n        };\n\n        const onDocumentMouseMove = useCallback((event) => {\n            if (isDroging && lastTarget) {\n                lastDiffX = event.pageX - lastX;\n                if (lastType === 'left') {\n                    lastTarget.style.width = `${lastWidth - lastDiffX}px`;\n                    lastTarget.style.transform = `translate(${lastDiffX}px)`;\n                } else if (lastType === 'right') {\n                    lastTarget.style.width = `${lastWidth + lastDiffX}px`;\n                } else {\n                    lastTarget.style.transform = `translate(${lastDiffX}px)`;\n                }\n            }\n        }, []);\n\n        const onDocumentMouseUp = useCallback(() => {\n            if (isDroging && lastTarget && lastDiffX) {\n                const timeDiff = lastDiffX / gridGap / 10;\n                const index = hasSubtitle(lastSub);\n                const previou = subtitles[index - 1];\n                const next = subtitles[index + 1];\n\n                const startTime = magnetically(\n                    lastSub.startTime + timeDiff,\n                    previou && autoAlign ? previou.endTime : null,\n                );\n                const endTime = magnetically(lastSub.endTime + timeDiff, next && autoAlign ? next.startTime : null);\n                const width = (endTime - startTime) * 10 * gridGap;\n\n                if ((previou && endTime < previou.startTime) || (next && startTime > next.endTime)) {\n                    notify(t('parameter-error'), 'error');\n                } else {\n                    if (lastType === 'left') {\n                        if (startTime >= 0 && startTime < lastSub.endTime) {\n                            const start = secondToTime(startTime);\n                            updateSubtitle(lastSub, 'start', start);\n                            player.loop = loopPlayback ? [startTime, endTime] : [];\n                            player.seek = startTime;\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                            notify(t('parameter-error'), 'error');\n                        }\n                    } else if (lastType === 'right') {\n                        if (endTime >= 0 && endTime > lastSub.startTime) {\n                            const end = secondToTime(endTime);\n                            updateSubtitle(lastSub, 'end', end);\n                            player.loop = loopPlayback ? [startTime, endTime] : [];\n                            player.seek = startTime;\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                            notify(t('parameter-error'), 'error');\n                        }\n                    } else {\n                        if (startTime > 0 && endTime > 0 && endTime > startTime) {\n                            const start = secondToTime(startTime);\n                            const end = secondToTime(endTime);\n                            updateSubtitle(lastSub, {\n                                start,\n                                end,\n                            });\n                            player.loop = loopPlayback ? [startTime, endTime] : [];\n                            player.seek = startTime;\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                            notify(t('parameter-error'), 'error');\n                        }\n                    }\n                }\n\n                lastTarget.style.transform = `translate(0)`;\n            }\n\n            lastType = '';\n            lastX = 0;\n            lastWidth = 0;\n            lastDiffX = 0;\n            isDroging = false;\n        }, [gridGap, hasSubtitle, player, subtitles, updateSubtitle, autoAlign, loopPlayback]);\n\n        const onKeyDown = useCallback(\n            (event) => {\n                const sub = currentSubs[lastIndex];\n                if (sub && lastTarget) {\n                    const keyCode = getKeyCode(event);\n                    switch (keyCode) {\n                        case 37:\n                            updateSubtitle(sub, {\n                                start: secondToTime(sub.startTime - 0.1),\n                                end: secondToTime(sub.endTime - 0.1),\n                            });\n                            player.loop = [];\n                            player.seek = sub.startTime - 0.1;\n                            break;\n                        case 39:\n                            updateSubtitle(sub, {\n                                start: secondToTime(sub.startTime + 0.1),\n                                end: secondToTime(sub.endTime + 0.1),\n                            });\n                            player.loop = [];\n                            player.seek = sub.startTime + 0.1;\n                            break;\n                        case 8:\n                        case 46:\n                            removeSubtitle(sub);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            },\n            [currentSubs, player, removeSubtitle, updateSubtitle],\n        );\n\n        useEffect(() => {\n            document.addEventListener('click', onDocumentClick);\n            document.addEventListener('mousemove', onDocumentMouseMove);\n            document.addEventListener('mouseup', onDocumentMouseUp);\n            window.addEventListener('keydown', onKeyDown);\n            return () => {\n                document.removeEventListener('click', onDocumentClick);\n                document.removeEventListener('mousemove', onDocumentMouseMove);\n                document.removeEventListener('mouseup', onDocumentMouseUp);\n                window.removeEventListener('keydown', onKeyDown);\n            };\n        }, [onDocumentClick, onDocumentMouseMove, onDocumentMouseUp, onKeyDown]);\n\n        return (\n            <Block ref={$blockRef}>\n                <div ref={$subsRef}>\n                    {currentSubs.map((sub, key) => {\n                        return (\n                            <div\n                                className={[\n                                    'sub-item',\n                                    key === currentIndex ? 'sub-highlight' : '',\n                                    checkSubtitle(sub) ? 'sub-illegal' : '',\n                                ]\n                                    .join(' ')\n                                    .trim()}\n                                key={key}\n                                style={{\n                                    left: render.padding * gridGap + (sub.startTime - render.beginTime) * gridGap * 10,\n                                    width: (sub.endTime - sub.startTime) * gridGap * 10,\n                                }}\n                                onClick={() => {\n                                    setContextMenu(false);\n                                    if (player.duration >= sub.startTime) {\n                                        player.loop = loopPlayback ? [sub.startTime, sub.endTime] : [];\n                                        player.seek = sub.startTime + 0.001;\n                                    }\n                                }}\n                                onContextMenu={(event) => onContextMenu(sub, event)}\n                                onDoubleClick={(event) => onDoubleClick(sub, event)}\n                            >\n                                <div\n                                    className=\"sub-handle\"\n                                    style={{\n                                        left: 0,\n                                        width: gridGap,\n                                    }}\n                                    onMouseDown={(event) => onMouseDown(sub, event, 'left')}\n                                ></div>\n                                <div className=\"sub-text\" onMouseDown={(event) => onMouseDown(sub, event)}>\n                                    {sub.text.split(/\\r?\\n/).map((line, index) => (\n                                        <p key={index}>{line}</p>\n                                    ))}\n                                </div>\n                                <div\n                                    className=\"sub-handle\"\n                                    style={{\n                                        right: 0,\n                                        width: gridGap,\n                                    }}\n                                    onMouseDown={(event) => onMouseDown(sub, event, 'right')}\n                                ></div>\n                            </div>\n                        );\n                    })}\n                </div>\n                <div\n                    ref={$contextMenuRef}\n                    className=\"contextmenu\"\n                    style={{\n                        visibility: contextMenu ? 'visible' : 'hidden',\n                        left: contextMenuX,\n                        top: contextMenuY,\n                    }}\n                >\n                    <div\n                        className=\"contextmenu-item\"\n                        onClick={() => {\n                            removeSubtitle(lastSub);\n                            setContextMenu(false);\n                        }}\n                    >\n                        <Translate value=\"delete\" />\n                    </div>\n                    <div\n                        className=\"contextmenu-item\"\n                        onClick={() => {\n                            addSubtitle(hasSubtitle(lastSub) + 1);\n                            setContextMenu(false);\n                        }}\n                    >\n                        <Translate value=\"insert\" />\n                    </div>\n                    <div\n                        className=\"contextmenu-item\"\n                        onClick={() => {\n                            mergeSubtitle(lastSub);\n                            setContextMenu(false);\n                        }}\n                    >\n                        <Translate value=\"merge\" />\n                    </div>\n                </div>\n            </Block>\n        );\n    },\n    (prevProps, nextProps) => {\n        return (\n            isEqual(prevProps.subtitles, nextProps.subtitles) &&\n            isEqual(prevProps.render, nextProps.render) &&\n            prevProps.currentTime === nextProps.currentTime &&\n            prevProps.autoAlign === nextProps.autoAlign &&\n            prevProps.loopPlayback === nextProps.loopPlayback\n        );\n    },\n);\n","import React, { useEffect, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport Sub from '../subtitle/sub';\nimport { secondToTime, getKeyCode } from '../utils';\nimport { t } from 'react-i18nify';\n\nconst Metronome = styled.div`\n    position: absolute;\n    z-index: 8;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    user-select: none;\n\n    .templet {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        height: 100%;\n        background-color: rgba(76, 175, 80, 0.5);\n        border-left: 1px solid rgba(76, 175, 80, 0.8);\n        border-right: 1px solid rgba(76, 175, 80, 0.8);\n        user-select: none;\n        pointer-events: none;\n    }\n`;\n\nfunction findIndex(subs, startTime) {\n    return subs.findIndex((item, index) => {\n        return (\n            (startTime >= item.endTime && !subs[index + 1]) ||\n            (item.startTime <= startTime && item.endTime > startTime) ||\n            (startTime >= item.endTime && subs[index + 1] && startTime < subs[index + 1].startTime)\n        );\n    });\n}\n\nlet isDroging = false;\nexport default function({ render, metronome, currentTime, subtitles, addSubtitle, player, setMetronome, loopPlayback }) {\n    const [metronomeStartTime, setMetronomeStartTime] = useState(0);\n    const [drogStartTime, setDrogStartTime] = useState(0);\n    const [drogEndTime, setDrogEndTime] = useState(0);\n\n    const gridGap = document.body.clientWidth / render.gridNum;\n    const $metronomeRef = React.createRef();\n\n    const onKeyDown = useCallback(\n        event => {\n            if (metronome) {\n                const keyCode = getKeyCode(event);\n                if (keyCode === 32) {\n                    event.preventDefault();\n\n                    if (!metronomeStartTime) {\n                        setMetronomeStartTime(currentTime);\n                    }\n\n                    if (metronomeStartTime && metronome && currentTime - metronomeStartTime >= 0.2) {\n                        const index = findIndex(subtitles, metronomeStartTime) + 1;\n                        const start = secondToTime(metronomeStartTime);\n                        const end = secondToTime(currentTime);\n                        addSubtitle(index, new Sub(start, end, t('subtitle-text')));\n                        setMetronomeStartTime(0);\n                    }\n                }\n            }\n        },\n        [addSubtitle, currentTime, metronome, metronomeStartTime, subtitles],\n    );\n\n    const getEventTime = useCallback(\n        event => {\n            return (event.pageX - render.padding * gridGap) / gridGap / 10 + render.beginTime;\n        },\n        [gridGap, render],\n    );\n\n    const onMouseDown = useCallback(\n        event => {\n            const clickTime = getEventTime(event);\n            player.loop = [];\n            player.seek = clickTime;\n            isDroging = true;\n            setDrogStartTime(clickTime);\n        },\n        [getEventTime, player],\n    );\n\n    const onMouseMove = useCallback(\n        event => {\n            if (isDroging) {\n                player.pause = true;\n                setDrogEndTime(getEventTime(event));\n            }\n        },\n        [setDrogEndTime, getEventTime, player],\n    );\n\n    const onDocumentMouseUp = useCallback(() => {\n        if (isDroging) {\n            setMetronome(false);\n            setMetronomeStartTime(0);\n            if (drogStartTime && drogEndTime && drogEndTime - drogStartTime >= 0.2) {\n                const index = findIndex(subtitles, drogStartTime) + 1;\n                const start = secondToTime(drogStartTime);\n                const end = secondToTime(drogEndTime);\n                addSubtitle(index, new Sub(start, end, t('subtitle-text')));\n            }\n        }\n        isDroging = false;\n        setDrogStartTime(0);\n        setDrogEndTime(0);\n    }, [addSubtitle, drogEndTime, drogStartTime, setMetronome, subtitles]);\n\n    const onDocumentClick = useCallback(\n        event => {\n            if (event.composedPath) {\n                const composedPath = event.composedPath() || [];\n                if (player.playing && composedPath.includes($metronomeRef.current)) {\n                    setMetronome(true);\n                    isDroging = false;\n                    setDrogStartTime(0);\n                    setDrogEndTime(0);\n                } else {\n                    setMetronome(false);\n                    setMetronomeStartTime(0);\n                }\n            }\n        },\n        [player, $metronomeRef, setMetronome],\n    );\n\n    useEffect(() => {\n        window.addEventListener('keydown', onKeyDown);\n        document.addEventListener('click', onDocumentClick);\n        document.addEventListener('mouseup', onDocumentMouseUp);\n        return () => {\n            window.removeEventListener('keydown', onKeyDown);\n            document.removeEventListener('click', onDocumentClick);\n            document.removeEventListener('mouseup', onDocumentMouseUp);\n        };\n    }, [onKeyDown, onDocumentClick, onDocumentMouseUp]);\n\n    return (\n        <Metronome onMouseDown={onMouseDown} onMouseMove={onMouseMove} ref={$metronomeRef}>\n            {player && player.playing && metronomeStartTime && metronome && currentTime > metronomeStartTime ? (\n                <div\n                    className=\"templet\"\n                    style={{\n                        left: render.padding * gridGap + (metronomeStartTime - render.beginTime) * gridGap * 10,\n                        width: (currentTime - metronomeStartTime) * gridGap * 10,\n                    }}\n                ></div>\n            ) : null}\n            {player && !player.playing && drogStartTime && drogEndTime && drogEndTime > drogStartTime ? (\n                <div\n                    className=\"templet\"\n                    style={{\n                        left: render.padding * gridGap + (drogStartTime - render.beginTime) * gridGap * 10,\n                        width: (drogEndTime - drogStartTime) * gridGap * 10,\n                    }}\n                ></div>\n            ) : null}\n        </Metronome>\n    );\n}\n","import React, {useEffect, useState} from 'react';\nimport styled from 'styled-components';\nimport WF from '../waveform';\nimport {sleep, syntheticVideo} from '../utils';\nimport Block from './Block';\nimport SyntheticVideo from './SyntheticVideo';\nimport Metronome from './Metronome';\nimport {t, Translate} from 'react-i18nify';\nimport Dialog from \"./Dialog\";\n\nconst Footer = styled.div`\n    display: flex;\n    flex-direction: column;\n    height: 120px;\n    margin-bottom: 20px;\n\n    .timeline-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 35px;\n        font-size: 12px;\n        border-bottom: 1px solid #000;\n        color: rgba(255, 255, 255, 0.5);\n        background-color: rgba(0, 0, 0, 0.3);\n\n        .timeline-header-left {\n            display: flex;\n            align-items: center;\n            height: 100%;\n            .item {\n                display: flex;\n                padding: 0 10px;\n                height: 100%;\n                border-right: 1px solid #000;\n\n                .name {\n                    display: flex;\n                    align-items: center;\n                    margin-right: 10px;\n                }\n\n                .value {\n                    display: flex;\n                    align-items: center;\n\n                    input[type='checkbox'] {\n                        outline: none;\n                    }\n\n                    input[type='range'] {\n                        height: 3px;\n                        width: 100px;\n                        outline: none;\n                        appearance: none;\n                        background-color: rgba(255, 255, 255, 0.2);\n                    }\n\n                    select {\n                        outline: none;\n                    }\n                }\n            }\n        }\n\n        .timeline-header-right {\n            display: flex;\n            align-items: center;\n            height: 100%;\n            padding: 0 15px;\n            border-left: 1px solid #000;\n        }\n    }\n\n    .timeline-body {\n        position: relative;\n        flex: 1;\n\n        .waveform {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            user-select: none;\n            pointer-events: none;\n        }\n    }\n`;\n\nlet wf = null;\nconst Waveform = React.memo(\n    ({setOption, options, player, setDecodeing, setFileSize, setChannelNum, setRender}) => {\n        const $waveform = React.createRef();\n\n        useEffect(() => {\n            if (wf) wf.destroy();\n\n            wf = new WF({\n                container: $waveform.current,\n                mediaElement: player.template.$video,\n                backgroundColor: 'rgb(20, 23, 38)',\n                waveColor: 'rgba(255, 255, 255, 0.1)',\n                progressColor: 'rgba(255, 255, 255, 0.5)',\n                gridColor: 'rgba(255, 255, 255, 0.05)',\n                rulerColor: 'rgba(255, 255, 255, 0.5)',\n            });\n\n            wf.on('render', setRender);\n            wf.on('decodeing', setDecodeing);\n            wf.on('fileSize', setFileSize);\n            wf.on('audioblob', (audioblob) => setOption({\"audioblob\": audioblob}));\n            wf.on('audiobuffer', (audiobuffer) => setChannelNum(audiobuffer.numberOfChannels));\n            sleep(1000).then(() => wf.load(options.videoUrl));\n        }, [player, $waveform, options.videoUrl, setDecodeing, setFileSize, setChannelNum, setRender]);\n        return <div className=\"waveform\" ref={$waveform}/>;\n    },\n    (prevProps, nextProps) => prevProps.options.videoUrl === nextProps.options.videoUrl,\n);\n\nexport default function (props) {\n    const [decodeing, setDecodeing] = useState(0);\n    const [fileSize, setFileSize] = useState(0);\n    const [channelNum, setChannelNum] = useState(1);\n    const [metronome, setMetronome] = useState(false);\n    const [autoAlign, setAutoAlign] = useState(true);\n    const [loopPlayback, setLoopPlayback] = useState(false);\n    const [render, setRender] = useState({\n        padding: 5,\n        duration: 10,\n        gridNum: 110,\n        beginTime: 0,\n    });\n\n    return (\n        <Footer>\n            <div className=\"timeline-header\">\n                <div className=\"timeline-header-left\">\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"waveform\"/>\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                defaultChecked={true}\n                                type=\"checkbox\"\n                                onChange={(event) => {\n                                    if (!wf) return;\n                                    wf.setOptions({\n                                        wave: event.target.checked,\n                                    });\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"size\"/>\n                        </div>\n                        <div className=\"value\" style={{color: '#FF5722'}}>\n                            {((fileSize || 0) / 1024 / 1024).toFixed(2)} M\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"decode\"/>\n                        </div>\n                        <div className=\"value\" style={{color: '#FF5722'}}>\n                            {((decodeing || 0) * 100).toFixed(2)}%\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"channel\"/>\n                        </div>\n                        <div className=\"value\">\n                            <select\n                                style={{color: \"#000000\"}}\n                                defaultValue={0}\n                                onChange={(event) => {\n                                    if (!wf) return;\n                                    wf.changeChannel(Number(event.target.value || 0));\n                                }}\n                            >\n                                {Array(channelNum)\n                                    .fill()\n                                    .map((_, index) => (\n                                        <option key={index} value={index}>\n                                            {index + 1}\n                                        </option>\n                                    ))}\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"auto-align\"/>\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                checked={autoAlign}\n                                type=\"checkbox\"\n                                onChange={() => {\n                                    setAutoAlign(!autoAlign);\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"loop-playback\"/>\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                checked={loopPlayback}\n                                type=\"checkbox\"\n                                onChange={() => {\n                                    const value = !loopPlayback;\n                                    setLoopPlayback(value);\n                                    if (!value) {\n                                        props.player.loop = [];\n                                    }\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"duration\"/>\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                defaultValue=\"10\"\n                                type=\"range\"\n                                min=\"5\"\n                                max=\"20\"\n                                step=\"1\"\n                                onChange={(event) => {\n                                    if (!wf) return;\n                                    wf.setOptions({\n                                        duration: Number(event.target.value || 10),\n                                    });\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"zoom\"/>\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                defaultValue=\"1\"\n                                type=\"range\"\n                                min=\"0.1\"\n                                max=\"2\"\n                                step=\"0.1\"\n                                onChange={(event) => {\n                                    if (!wf) return;\n                                    wf.setOptions({\n                                        waveScale: Number(event.target.value || 1),\n                                    });\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"metronome\"/>\n                        </div>\n                        <div className=\"value\">\n                            {metronome ? (\n                                <span style={{color: '#4CAF50'}}>ON</span>\n                            ) : (\n                                <span style={{color: '#FF5722'}}>OFF</span>\n                            )}\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div\n                            style={{cursor: 'pointer', color: '#03f6d1'}}\n                            className=\"value\"\n                            onClick={() => props.setOption({ syntheticVideoDialog: true })}\n                        >\n                            <Translate value=\"export-video\"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"timeline-body\">\n                {props.player ? (\n                    <Waveform\n                        {...props}\n                        setDecodeing={setDecodeing}\n                        setFileSize={setFileSize}\n                        setChannelNum={setChannelNum}\n                        setRender={setRender}\n                    />\n                ) : null}\n                <Metronome {...props} render={render} metronome={metronome} setMetronome={setMetronome}/>\n                <Block {...props} render={render} autoAlign={autoAlign} loopPlayback={loopPlayback}/>\n            </div>\n            {props.options.syntheticVideoDialog ? (\n                <Dialog title={t('export-video')} onClose={() => props.setOption({ syntheticVideoDialog: false })}>\n                    <SyntheticVideo {...props} />\n                </Dialog>\n            ) : null}\n        </Footer>\n    );\n}\n","export default class Storage {\n    constructor() {\n        this.name = 'subplayer_settings';\n    }\n\n    get(key) {\n        const storage = JSON.parse(window.localStorage.getItem(this.name)) || {};\n        return key ? storage[key] : storage;\n    }\n\n    set(key, value) {\n        const storage = Object.assign({}, this.get(), {\n            [key]: value,\n        });\n        window.localStorage.setItem(this.name, JSON.stringify(storage));\n    }\n\n    del(key) {\n        const storage = this.get();\n        delete storage[key];\n        window.localStorage.setItem(this.name, JSON.stringify(storage));\n    }\n\n    clean() {\n        window.localStorage.removeItem(this.name);\n    }\n}\n","import NProgress from 'nprogress';\nimport pLimit from 'p-limit';\nimport { sleep, notify } from '../utils/index';\n\nexport function googleTranslate(query = '', lang) {\n    if (!query.trim()) return Promise.resolve('');\n    const url = new URL('https://translate.googleapis.com/translate_a/single');\n    url.searchParams.append('client', 'gtx');\n    url.searchParams.append('sl', 'auto');\n    url.searchParams.append('dt', 't');\n    url.searchParams.append('tl', lang);\n    url.searchParams.append('q', query);\n\n    return new Promise(resolve => {\n        sleep().then(async () => {\n            fetch(url.href)\n                .then(data => data.json())\n                .then(data => {\n                    if (data) {\n                        resolve(data[0].map(item => item[0].trim()).join('\\n'));\n                    } else {\n                        resolve('');\n                    }\n                })\n                .catch(error => {\n                    notify(error.message, 'error');\n                    resolve('');\n                });\n        });\n    });\n}\n\nexport default async function translate(subtitles, lang) {\n    NProgress.start();\n    const limit = pLimit(1);\n    let index = 0;\n\n    try {\n        const result = await Promise.all(\n            subtitles.map(item =>\n                limit(async () => {\n                    const data = await googleTranslate(item.text, lang);\n                    NProgress.set(++index / subtitles.length);\n                    if (data) {\n                        item.text = data;\n                    }\n                    return item;\n                }),\n            ),\n        );\n        NProgress.done();\n        return result;\n    } catch (error) {\n        NProgress.done();\n        notify(error.message, 'error');\n    }\n}\n","import React, {useState, useMemo, useCallback, useEffect} from 'react';\nimport GlobalStyle from './GlobalStyle';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport Sub from '../subtitle/sub';\nimport clamp from 'lodash/clamp';\nimport {secondToTime, notify} from '../utils';\nimport {getSubFromVttUrl, vttToUrlUseWorker} from '../subtitle';\nimport Storage from '../utils/storage';\nimport isEqual from 'lodash/isEqual';\nimport NProgress from 'nprogress';\nimport {ToastContainer} from 'react-toastify';\nimport translate, {googleTranslate} from '../translate';\nimport {t, setLocale} from 'react-i18nify';\n\nconst history = [];\nlet inTranslation = false;\nconst storage = new Storage();\nconst worker = new Worker(vttToUrlUseWorker());\n\nexport default function () {\n    // Player instance\n    const [player, setPlayer] = useState(null);\n\n    // Language\n    const defaultLang = storage.get('language') || navigator.language.toLowerCase() || 'en';\n    const [language, setLanguage] = useState(defaultLang);\n\n    // Subtitle currently playing index\n    const [currentIndex, setCurrentIndex] = useState(-1);\n\n    // Subtitle currently playing time\n    const [currentTime, setCurrentTime] = useState(0);\n\n    // All subtitles\n    const [subtitles, setSubtitles] = useState([]);\n\n    // All options\n    const [options, setOptions] = useState({\n        videoUrl:'https://static.yximgs.com/udata/pkg/KMOVIE-CDN/sample.mp4',\n        subtitleUrl: '/sample.vtt',\n        audioblob: \"\",\n        templateId: 119,\n        fontId: 100,\n        fontColor: \"\",\n        helpDialog: false,\n        uploadDialog: false,\n        syntheticVideoDialog: false,\n        translationLanguage: 'en',\n    });\n\n    // Update language\n    const updateLang = useCallback(\n        value => {\n            setLocale(value);\n            setLanguage(value);\n            storage.set('language', value);\n        },\n        [setLanguage],\n    );\n\n    // Update an option\n    const setOption = useCallback(\n        option => {\n            setOptions({\n                ...options,\n                ...option,\n            });\n        },\n        [options, setOptions],\n    );\n\n    // Only way to update all subtitles\n    const updateSubtitles = useCallback(\n        (subs, saveToHistory = true) => {\n            if (subs.length && !isEqual(subs, subtitles)) {\n                setSubtitles(subs);\n\n                // Save 100 subtitles to history\n                if (saveToHistory) {\n                    if (history.length >= 100) {\n                        history.shift();\n                    }\n                    history.push(subs.map(sub => sub.clone));\n                }\n\n                // Save to storage\n                storage.set('subtitles', subs);\n\n                // Convert subtitles to vtt url\n                worker.postMessage(subs);\n            }\n        },\n        [setSubtitles, subtitles],\n    );\n\n    // Initialize subtitles from url or storage\n    const initSubtitles = useCallback(async () => {\n        const storageSubs = storage.get('subtitles');\n        if (storageSubs && storageSubs.length) {\n            updateSubtitles(storageSubs.map(item => new Sub(item.start, item.end, item.text)));\n        } else {\n            const subs = await getSubFromVttUrl(options.subtitleUrl);\n            updateSubtitles(subs);\n        }\n    }, [options.subtitleUrl, updateSubtitles]);\n\n    // Run only once\n    useEffect(() => {\n        initSubtitles();\n        updateLang(language);\n        if (player && !worker.onmessage) {\n            worker.onmessage = event => {\n                player.subtitle.switch(event.data);\n            };\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [player]);\n\n    // Update current index from current time\n    useMemo(() => {\n        setCurrentIndex(subtitles.findIndex(item => item.startTime <= currentTime && item.endTime > currentTime));\n    }, [subtitles, currentTime, setCurrentIndex]);\n\n    // Detect if the subtitle exists\n    const hasSubtitle = useCallback(sub => subtitles.indexOf(sub), [subtitles]);\n\n    // Copy all subtitles\n    const copySubtitles = useCallback(() => subtitles.map(sub => sub.clone), [subtitles]);\n\n    // Check if subtitle is legal\n    const checkSubtitle = useCallback(\n        sub => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const previous = subtitles[index - 1];\n            return (previous && sub.startTime < previous.endTime) || !sub.check;\n        },\n        [hasSubtitle, subtitles],\n    );\n\n    // Update a single subtitle\n    const updateSubtitle = useCallback(\n        (sub, key, value) => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const subs = copySubtitles();\n            const {clone} = sub;\n            if (typeof key === 'object') {\n                Object.assign(clone, key);\n            } else {\n                clone[key] = value;\n            }\n            if (clone.check) {\n                subs[index] = clone;\n                updateSubtitles(subs);\n            } else {\n                notify(t('parameter-error'), 'error');\n            }\n        },\n        [hasSubtitle, copySubtitles, updateSubtitles],\n    );\n\n    // Delete a subtitle\n    const removeSubtitle = useCallback(\n        sub => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const subs = copySubtitles();\n            if (subs.length === 1) {\n                return notify(t('keep-one'), 'error');\n            }\n            subs.splice(index, 1);\n            updateSubtitles(subs);\n        },\n        [hasSubtitle, copySubtitles, updateSubtitles],\n    );\n\n    // Add a subtitle\n    const addSubtitle = useCallback(\n        (index, sub) => {\n            const subs = copySubtitles();\n            if (sub) {\n                subs.splice(index, 0, sub);\n            } else {\n                const previous = subs[index - 1];\n                const start = previous ? secondToTime(previous.endTime + 0.1) : '00:00:00.001';\n                const end = previous ? secondToTime(previous.endTime + 1.1) : '00:00:01.001';\n                const sub = new Sub(start, end, t('subtitle-text'));\n                subs.splice(index, 0, sub);\n            }\n            updateSubtitles(subs);\n        },\n        [copySubtitles, updateSubtitles],\n    );\n\n    // Merge two subtitles\n    const mergeSubtitle = useCallback(\n        sub => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const subs = copySubtitles();\n            const next = subs[index + 1];\n            if (!hasSubtitle(next)) return;\n            const merge = new Sub(sub.start, next.end, sub.text + '\\n' + next.text);\n            subs[index] = merge;\n            subs.splice(index + 1, 1);\n            updateSubtitles(subs);\n        },\n        [hasSubtitle, copySubtitles, updateSubtitles],\n    );\n\n    // Remove all subtitles\n    const removeSubtitles = useCallback(() => {\n        updateSubtitles([new Sub('00:00:00.000', '00:00:01.000', t('subtitle-text'))]);\n    }, [updateSubtitles]);\n\n    // Undo subtitles\n    const undoSubtitles = useCallback(() => {\n        if (history.length > 1) {\n            history.pop();\n            const subs = history[history.length - 1];\n            updateSubtitles(subs, false);\n            notify(t('history-rollback'));\n        } else {\n            notify(t('history-empty'), 'error');\n        }\n    }, [updateSubtitles]);\n\n    // Subtitle time offset\n    const timeOffsetSubtitles = useCallback(\n        time => {\n            const subs = copySubtitles();\n            updateSubtitles(\n                subs.map(item => {\n                    item.start = secondToTime(clamp(item.startTime + time, 0, Infinity));\n                    item.end = secondToTime(clamp(item.endTime + time, 0, Infinity));\n                    return item;\n                }),\n            );\n            notify(`${t('time-offset')} ${time * 1000}ms`);\n        },\n        [copySubtitles, updateSubtitles],\n    );\n\n    // Clean all subtitles\n    const cleanSubtitles = useCallback(() => {\n        history.length = 0;\n        storage.set('subtitles', []);\n        removeSubtitles();\n        player.loop = [];\n        player.seek = 0;\n        notify(t('clear-success'));\n    }, [player, removeSubtitles]);\n\n    // Translate a subtitle\n    const translateSubtitle = useCallback(\n        async sub => {\n            if (!inTranslation) {\n                const index = hasSubtitle(sub);\n                if (index < 0) return;\n                try {\n                    inTranslation = true;\n                    NProgress.start().set(0.5);\n                    const text = await googleTranslate(sub.text, options.translationLanguage);\n                    if (text) {\n                        updateSubtitle(sub, 'text', text);\n                        notify(t('translation-success'));\n                    }\n                    inTranslation = false;\n                    NProgress.done();\n                } catch (error) {\n                    notify(error.message, 'error');\n                    inTranslation = false;\n                    NProgress.done();\n                }\n            } else {\n                notify(t('translation-progress'), 'error');\n            }\n        },\n        [hasSubtitle, updateSubtitle, options.translationLanguage],\n    );\n\n    // Translate all subtitles\n    const translateSubtitles = useCallback(async () => {\n        if (!inTranslation) {\n            const subs = copySubtitles();\n            if (subs.length && subs.length <= 1000) {\n                inTranslation = true;\n                try {\n                    updateSubtitles(await translate(subs, options.translationLanguage));\n                    notify(t('translation-success'));\n                    inTranslation = false;\n                } catch (error) {\n                    notify(error.message, 'error');\n                    inTranslation = false;\n                }\n            } else {\n                notify(t('translation-limit'), 'error');\n            }\n        } else {\n            notify(t('translation-progress'), 'error');\n        }\n    }, [copySubtitles, updateSubtitles, options.translationLanguage]);\n\n    const props = {\n        player,\n        storage,\n        options,\n        language,\n        subtitles,\n        currentTime,\n        currentIndex,\n\n        setOption,\n        setPlayer,\n        setCurrentTime,\n        setCurrentIndex,\n\n        updateLang,\n        hasSubtitle,\n        addSubtitle,\n        checkSubtitle,\n        undoSubtitles,\n        mergeSubtitle,\n        removeSubtitle,\n        updateSubtitle,\n        cleanSubtitles,\n        updateSubtitles,\n        removeSubtitles,\n        translateSubtitle,\n        translateSubtitles,\n        timeOffsetSubtitles,\n    };\n\n    return (\n        <React.Fragment>\n            <GlobalStyle/>\n            <Header {...props} />\n            <Main {...props} />\n            <Footer {...props} />\n            <ToastContainer/>\n        </React.Fragment>\n    );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport NProgress from 'nprogress';\nimport * as serviceWorker from './serviceWorker';\nimport { isMobile } from './utils';\nimport { setTranslations } from 'react-i18nify';\nimport i18n from './i18n';\nimport 'normalize.css';\nimport './fontello/css/fontello.css';\nimport 'nprogress/nprogress.css';\nimport 'react-virtualized/styles.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nsetTranslations(i18n);\nNProgress.configure({ minimum: 0, showSpinner: false });\nReactDOM.render(isMobile() ? 'getsubtile does not support mobile access' : <App />, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}